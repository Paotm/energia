"use strict";var GLOBAL_NODES=void 0,GLOBAL_LINKS=void 0,GLOSARIO=void 0,INTRO={nodes_title:["Balance energético: qué es y cómo se mide","Del gas a la electricidad","Los usos de la electricidad","Antes y ahora"],nodes_description:["El balance energético <b>detalla flujos, y cantidades de energía producida y consumida</b>. Por convención, <b>la unidad de medida es el ktep</b>. Cada ktep representa mil toneladas equivalente de petróleo.","Veamos este ejemplo. En 2015, se extrajeron 37.786 ktep de Gas natural. A través de las plantas de transformación, se lo convirtió en gas de red. Luego, el 40% del gas de red se destinó a centrales eléctricas que producen electricidad para el consumo.","El principal uso de la electricidad fue en la industria y los hogares. Como parte del proceso, una porción importante se perdió por causas tecnológicas y naturales.","Compará con 1960 y descubrí todo el crecimiento que hubo en los montos producidos y consumidos."]},SANKEY={margin:{top:40,right:200,bottom:40,left:200,header:20},size:{width:"",height:""},separacionNodo:20,anchoNodo:20,secciones_header:[["ENERGÍAS","PRIMARIAS"],["CENTROS DE","TRANSFORMACIÓN"],["ENERGÍAS","SECUNDARIAS"],["CENTROS DE","TRANSFORMACIÓN"],["ENERGÍAS","SECUNDARIAS"],["SECTORES","DE CONSUMO"]],tooltip:{}},SELECTORES={categorias:[["Energías primarias",["categorias1","categorias1","categorias1","categorias1","categorias1"]],["Energías secundarias",["categorias2","categorias2","categorias2","categorias2","categorias2"]],["Energías terciarias",["categorias3","categorias3","categorias3","categorias3","categorias3"]],["Centros de transformación",["categorias4","categorias4","categorias4","categorias4","categorias4"]],["Consumos",["categorias5","categorias5","categorias5","categorias5","categorias5"]],["No aprovechables",["categorias6","categorias6","categorias6","categorias6","categorias6"]]],anio:[]},COLORES_FLUJO={importacion:"#FFCF87",exportacion:"#00897B",produccion:"#7FC6E6",perdida:"#ED7960",default:"#CFD8DC"},STATIC_NODE={close:!0,id:null},BUSCAR_NODO=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return GLOBAL_NODES.filter(function(o){return o.id===t+e})[0]};Number.prototype.format_number=function(t,e,o,n){var r="\\d(?=(\\d{"+(e||3)+"})+"+(t>0?"\\D":"$")+")",a=this.toFixed(Math.max(0,~~t));return(n?a.replace(".",n):a).replace(new RegExp(r,"g"),"$&"+(o||","))},$(function(){var t=$("#sankey").height(),e=$("#sankey").width(),o=void 0,n=void 0,r=void 0,a=void 0,i=void 0,s=function(){$(".tooltip_content").show(),$(".tooltip_glosary").hide(),d3.select('button[name="citas"]').style("opacity",0),d3.select('button[name="glosario"]').attr("style",null)},l=function(){var t=d3.selectAll("#sankey .node");t.select("rect").transition().duration(200).style("stroke","black"),t.select("text").transition().duration(200).style("fill","black")},c=function(){var t=d3.selectAll("#sankey .link");t.filter(function(t){return 29!==t.target.id&&31!==t.target.id&&30!==t.source.id}).transition().duration(200).style("stroke","url(#gradient_prod)").style("stroke-opacity",.5),t.filter(function(t){return 30===t.source.id}).transition().duration(200).style("stroke","url(#gradient_imp)").style("stroke-opacity",.5),t.filter(function(t){return 31===t.target.id}).transition().duration(200).style("stroke","url(#gradient_exp)").style("stroke-opacity",.5),t.filter(function(t){return 29===t.target.id}).transition().duration(200).style("stroke",COLORES_FLUJO.perdida).style("stroke-opacity",.5)},d=function(){var t=d3.selectAll("#sankey .node");t.select("rect").transition().duration(200).style("stroke",null),t.select("text").transition().duration(200).style("fill",null)},p=function(){d3.selectAll("#sankey .link").transition().duration(200).style("stroke",COLORES_FLUJO.default).style("stroke-opacity",null)},u=function(t){s(),console.log(t),t.y<10?$("#tooltip").attr("class","view_bottom").css({top:$("#sankey > svg > g:nth-child(2)").offset().top+window.document.querySelector(".nano-content").scrollTop+t.y+t.dy+25,left:$("#sankey > svg > g:nth-child(2)").offset().left+t.dx/2+t.x}).fadeIn(100):$("#tooltip").attr("class","view_top").css({top:$("#sankey > svg > g:nth-child(2)").offset().top+window.document.querySelector(".nano-content").scrollTop+t.y-10,left:$("#sankey > svg > g:nth-child(2)").offset().left+t.dx/2+t.x}).fadeIn(100),1===t.posicionX||3===t.posicionX||5===t.posicionX?($(".title_total").text("Disponibilidad local"),$(".tooltip_name").text(t.nombre),$(".tooltip_ktep").text(t.oferta_interna.format_number(2,3,".",",")),$(".tooltip_production").parent().parent().removeAttr("style"),$(".tooltip_production").text(t.produccion.format_number(2,3,".",",")),$(".tooltip_importation").parent().parent().removeAttr("style"),$(".tooltip_importation").text(t.importacion.format_number(2,3,".",",")),$(".tooltip_exportation").parent().parent().removeAttr("style"),$(".tooltip_exportation").text(t.exportacion.format_number(2,3,".",",")),$(".tooltip_losses").parent().parent().removeAttr("style"),$(".tooltip_losses").text(t.perdidas.format_number(2,3,".",",")),$(".tooltip_others").parent().parent().removeAttr("style"),$(".tooltip_others").text(t.otros.format_number(2,3,".",","))):2===t.posicionX||4===t.posicionX?($(".title_total").text("Insumos de la central"),$(".tooltip_name").text(t.nombre),$(".tooltip_ktep").text(t.consumo.format_number(2,3,".",",")),$(".tooltip_production").parent().parent().removeAttr("style"),$(".tooltip_production").text(t.produccion.format_number(2,3,".",",")),$(".tooltip_importation").parent().parent().css({display:"none"}),$(".tooltip_exportation").parent().parent().css({display:"none"}),$(".tooltip_losses").parent().parent().removeAttr("style"),$(".tooltip_losses").text(t.perdida.format_number(2,3,".",",")),$(".tooltip_others").parent().parent().css({display:"none"})):(6===t.posicionX&&0===t.posicionY?$(".title_total").text("Pérdida total"):$(".title_total").text("Consumo"),$(".tooltip_name").text(t.nombre),$(".tooltip_ktep").text(t.consumo.format_number(2,3,".",",")),$(".tooltip_production").parent().parent().css({display:"none"}),$(".tooltip_importation").parent().parent().css({display:"none"}),$(".tooltip_exportation").parent().parent().css({display:"none"}),$(".tooltip_losses").parent().parent().css({display:"none"}),$(".tooltip_others").parent().parent().css({display:"none"}))},f=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a,i){var s=null===n?a.id:n,l=void 0;switch(e){case"fadeIn":null!==STATIC_NODE.id&&STATIC_NODE.id!==a.id&&($("#tooltip").fadeOut(100),t("fadeOut",STATIC_NODE.id,!0)(a,i)),STATIC_NODE.close=!0,l=d3.select("#node_"+s),l.select("rect").transition().style("stroke","black"),l.select("text").transition().style("fill","black"),o.each(function(t,e){t.source.id===s?d3.select("#node_"+t.target.id).select("text").transition().style("fill","black").style("font-weight","500"):t.target.id===s&&d3.select("#node_"+t.source.id).select("text").transition().style("fill","black").style("font-weight","500")}),o.filter(function(t){return t.source.id===s&&29!==t.target.id&&31!==t.target.id||t.target.id===s&&30!==t.source.id}).transition().duration(100).style("stroke","url(#gradient_prod)").style("stroke-opacity",.5),o.filter(function(t){return 30===t.source.id&&t.target.id===s}).transition().duration(100).style("stroke","url(#gradient_imp)").style("stroke-opacity",.5),o.filter(function(t){return t.source.id===s&&31===t.target.id}).transition().duration(100).style("stroke","url(#gradient_exp)").style("stroke-opacity",.5),o.filter(function(t){return t.source.id===s&&29===t.target.id||t.target.id===s&&29===s}).transition().duration(100).style("stroke",COLORES_FLUJO.perdida).style("stroke-opacity",.5);break;case"fadeOut":STATIC_NODE.close&&STATIC_NODE.id!==a.id||!0===r?(l=d3.select("#node_"+s),l.select("rect").transition().style("stroke",null),l.select("text").transition().style("fill",null),o.each(function(t,e){t.source.id===s?d3.select("#node_"+t.target.id).select("text").transition().style("fill",null).style("font-weight",null):t.target.id===s&&d3.select("#node_"+t.source.id).select("text").transition().style("fill",null).style("font-weight",null)}),o.filter(function(t){return t.source.id===s&&29!==t.target.id&&31!==t.target.id||t.target.id===s&&30!==t.source.id}).transition().duration(100).style("stroke",COLORES_FLUJO.default).style("stroke-opacity",null),o.filter(function(t){return 30===t.source.id&&t.target.id===s}).transition().duration(100).style("stroke","url(#gradient_imp_default)").style("stroke-opacity",null),o.filter(function(t){return t.source.id===s&&31===t.target.id}).transition().duration(100).style("stroke","url(#gradient_exp_default)").style("stroke-opacity",null),o.filter(function(t){return t.source.id===s&&29===t.target.id||t.target.id===s&&29===s}).transition().duration(100).style("stroke",COLORES_FLUJO.default).style("stroke-opacity",null)):STATIC_NODE.close=!0}}},y=function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",r=void 0,a=void 0,i=void 0,s=void 0,u=void 0,f={next:{1:function(){var t=[2,19,13,18,12,29],e=void 0,o=[{source:2,target:19,color:"url(#gradient_prod)",indice:1},{source:19,target:13,color:"url(#gradient_prod)",indice:2},{source:13,target:18,color:"url(#gradient_prod)",indice:3},{source:18,target:12,color:"url(#gradient_prod)",indice:4},{source:18,target:29,color:COLORES_FLUJO.perdida,indice:4}];d(),p(),t.forEach(function(t,o){e=d3.select("#node_"+t),e.select("rect").transition().delay(250*(o+1)).duration(200).style("stroke","black"),e.select("text").transition().delay(250*(o+1)).duration(200).style("fill","black")}),o.forEach(function(t,e){d3.selectAll("#sankey .link").filter(function(e){return e.source.id===t.source&&e.target.id===t.target}).transition().delay(250*t.indice).duration(200).style("stroke",t.color).style("stroke-opacity",.5)})},2:function(){var t=[25,23,27,26,28,22],e=void 0,o=[{source:12,target:25,color:"url(#gradient_prod)",indice:1},{source:12,target:23,color:"url(#gradient_prod)",indice:2},{source:12,target:27,color:"url(#gradient_prod)",indice:3},{source:12,target:26,color:"url(#gradient_prod)",indice:4},{source:12,target:28,color:"url(#gradient_prod)",indice:5},{source:12,target:22,color:"url(#gradient_prod)",indice:6},{source:12,target:29,color:COLORES_FLUJO.perdida,indice:7}];t.forEach(function(t,o){e=d3.select("#node_"+t),e.select("rect").transition().delay(250*(o+1)).duration(200).style("stroke","black"),e.select("text").transition().delay(250*(o+1)).duration(200).style("fill","black")}),o.forEach(function(t,e){d3.selectAll("#sankey .link").filter(function(e){return e.source.id===t.source&&e.target.id===t.target}).transition().delay(250*t.indice).duration(200).style("stroke",t.color).style("stroke-opacity",.5)})},3:function(){}},back:{0:function(){l(),c()},1:function(){var t=[25,23,27,26,28,22],e=void 0;t.forEach(function(t,o){e=d3.select("#node_"+t),e.select("rect").transition().delay(250).duration(200).style("stroke",null),e.select("text").transition().delay(250).duration(200).style("fill",null)}),d3.selectAll("#sankey .link").filter(function(t){return 12===t.source.id}).transition().delay(250).duration(200).style("stroke",COLORES_FLUJO.default).style("stroke-opacity",null)},2:function(){d3.select(".special-component-selector").transition().style("outline-style","none")}},start:function(){l(),c()},end:function(){d(),p(),$(".mini-tooltip").fadeIn()}};switch(o){case"create":d3.select("#modal_contenido").append("div").attr("id","intro_screen").style("top","0px").style("left","0px"),r=d3.select("#modal_contenido").append("div").attr("id","tooltip_intro"),r.append("div").attr("class","tooltip_header flex flex-justify-between flex-align-start"),r.select(".tooltip_header").append("h2").attr("class","tooltip_name"),r.select(".tooltip_header").append("img").attr("class","tooltip_exit").attr("src","./public/images/cruz.svg").attr("width","15"),r.append("div").attr("class","tooltip_content"),r.select(".tooltip_content").append("p").attr("class","tooltip_production"),a=r.append("div").attr("class"," tooltip_footer flex flex-justify-between"),i=a.append("button").attr("id","last").html('<img class="rotate" src="./public/images/flecha.svg" alt="back icon" width="10">Anterior'),u=a.append("aside").html(e+1+" / "+INTRO.nodes_title.length),s=a.append("button").attr("id","next").html('Siguiente<img src="./public/images/flecha.svg" alt="next icon" width="10">'),$(".tooltip_exit").last().on("click",function(){t(e,"delete","none")}),$(document).keyup(function(o){27===o.keyCode&&2===$(".tooltip_exit").length&&t(e,"delete","none")}),$("#intro_screen").first().on("click",function(o){t(e,"delete","none")}),f.start();break;case"delete":return f.end(),d3.select("#tooltip_intro").remove(),d3.select("#intro_screen").remove(),d3.selectAll("#sankey .node rect").transition().style("fill",null).style("stroke",null),d3.selectAll("#sankey .node text").transition().style("fill",null),d3.selectAll("#sankey .link").filter(function(t){return 30!==t.source.id&&31!==t.target.id}).transition().style("stroke",null).style("stroke-opacity",null),!1;case"normal":r=d3.select("#tooltip_intro"),a=r.select("div:nth-child(3)"),i=a.select("#last"),u=a.select("aside"),s=a.select("#next"),"none"!==n&&f[n][e]()}r.select("h2").html(INTRO.nodes_title[e]),r.select("p").html(INTRO.nodes_description[e]),u.html(e+1+" / "+INTRO.nodes_title.length),0===e?(i.attr("class","btn btn-default btn-xs").style("opacity",0),s.attr("class","btn btn-default btn-xs").on("click",function(){t(e+1,"normal","next")})):e===INTRO.nodes_title.length-1?(i.attr("class","btn btn-default btn-xs").on("click",function(){t(e-1,"normal","back")}),s.attr("class","btn btn-primary btn-xs").html("¡Ir al balance!").on("click",function(){t(e,"delete","none")})):(i.attr("class","btn btn-default btn-xs").on("click",function(){t(e-1,"normal","back")}).transition().style("opacity",null),s.attr("class","btn btn-default btn-xs").html('Siguiente<img src="./public/images/flecha.svg" alt="next icon" width="10">').on("click",function(){t(e+1,"normal","next")}))},g=function(t,e){return new Promise(function(o){"sankey"===e?d3.json("./public/data/data_"+t+".json",function(t){GLOBAL_NODES=t.nodes,GLOBAL_LINKS=t.links,o()}):d3.csv("./public/data/glosario.csv",function(t){GLOSARIO=t,o()})})},m=function(t,e){var o=e.margin,n=e.size,s=e.anchoNodo,l=e.separacionNodo,c=[];i=d3.select("#sankey").append("svg").attr("width",n.width).attr("height",n.height).attr("preserveAspectRatio","xMidYMid meet");var d=i.append("g").attr("id","chart-encabezado").attr("style","transform: translate("+o.left+"px, "+(o.top+15)+"px); -webkit-transform: translate("+o.left+"px, "+(o.top+15)+"px)");d.append("text").attr("class","chart-encabezado-left").attr("x",-10).text(SANKEY.secciones_header[0][0]),d.append("text").attr("class","chart-encabezado-left").attr("x",-10).attr("y",19).text(SANKEY.secciones_header[0][1]);var p=i.append("g").attr("style","transform: translate("+o.left+"px, "+(o.top+$("#chart-encabezado")[0].getBBox().height+o.header)+"px); -webkit-transform: translate("+o.left+"px, "+(o.top+$("#chart-encabezado")[0].getBBox().height+o.header)+"px)");r=d3.sankey().nodeWidth(s).nodePadding(l).size([n.width-o.left-o.right,n.height-o.top-o.bottom]).nodes(t.nodes).links(t.links).layout();var y=i.append("defs"),g=y.append("linearGradient").attr("id","gradient_imp").attr("x1","100%").attr("y1","100%").attr("x2","0%").attr("y2","0%");g.append("stop").attr("offset","0%").attr("stop-color",COLORES_FLUJO.importacion).attr("stop-opacity",1),g.append("stop").attr("offset","50%").attr("stop-color",COLORES_FLUJO.importacion).attr("stop-opacity",1),g.append("stop").attr("offset","100%").attr("stop-color",COLORES_FLUJO.importacion).attr("stop-opacity",0);var m=y.append("linearGradient").attr("id","gradient_imp_default").attr("x1","100%").attr("y1","100%").attr("x2","0%").attr("y2","0%");m.append("stop").attr("offset","0%").attr("stop-color",COLORES_FLUJO.default).attr("stop-opacity",1),m.append("stop").attr("offset","50%").attr("stop-color",COLORES_FLUJO.default).attr("stop-opacity",1),m.append("stop").attr("offset","100%").attr("stop-color",COLORES_FLUJO.default).attr("stop-opacity",0);var _=y.append("linearGradient").attr("id","gradient_exp").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");_.append("stop").attr("offset","0%").attr("stop-color",COLORES_FLUJO.exportacion).attr("stop-opacity",1),_.append("stop").attr("offset","50%").attr("stop-color",COLORES_FLUJO.exportacion).attr("stop-opacity",1),_.append("stop").attr("offset","100%").attr("stop-color",COLORES_FLUJO.exportacion).attr("stop-opacity",0);var h=y.append("linearGradient").attr("id","gradient_exp_default").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");h.append("stop").attr("offset","0%").attr("stop-color",COLORES_FLUJO.default).attr("stop-opacity",1),h.append("stop").attr("offset","50%").attr("stop-color",COLORES_FLUJO.default).attr("stop-opacity",1),h.append("stop").attr("offset","100%").attr("stop-color",COLORES_FLUJO.default).attr("stop-opacity",0);var k=y.append("linearGradient").attr("gradientUnits","userSpaceOnUse").attr("id","gradient_prod").attr("x1","0%").attr("y1","50%").attr("x2","100%").attr("y2","50%");k.append("stop").attr("offset","0%").attr("stop-color","rgb(32,106,171)").attr("stop-opacity",1),k.append("stop").attr("offset","20%").attr("stop-color","rgb(0,117,201)").attr("stop-opacity",1),k.append("stop").attr("offset","40%").attr("stop-color","rgb(0,157,218)").attr("stop-opacity",1),k.append("stop").attr("offset","60%").attr("stop-color","rgb(77,203,236)").attr("stop-opacity",1),k.append("stop").attr("offset","80%").attr("stop-color","rgb(127,218,241)").attr("stop-opacity",1),k.append("stop").attr("offset","100%").attr("stop-color","rgb(178,233,247)").attr("stop-opacity",1),a=r.link();var x=p.append("g").attr("id","links").selectAll(".link").data(r.links()).enter().append("path").attr("d",a).attr("class","link").style("stroke-width",function(t){return Math.max(1,t.dy)});x.filter(function(t){return 30===t.source.id}).style("stroke","url(#gradient_imp_default)"),x.filter(function(t){return 31===t.target.id}).style("stroke","url(#gradient_exp_default)");var O=p.append("g").attr("id","nodes").selectAll(".node").data(r.nodes()).enter().append("g").attr("id",function(t){return"node_"+t.id}).attr("class","node").attr("style",function(t){return-1===c.indexOf(t.x)&&c.push(t.x),"transform: translate("+t.x+"px, "+t.y+"px); -webkit-transform: translate("+t.x+"px, "+t.y+"px)"});O.filter(function(t){return"borrar"!==t.nombre&&t.oferta_interna>0||void 0===t.oferta_interna}).append("rect").attr("width",r.nodeWidth()).attr("height",function(t){return Math.max(5,t.dy)}).on("mouseenter",f("fadeIn",null)).on("mouseleave",f("fadeOut",null)).on("click",function(t){STATIC_NODE.id=t.id,STATIC_NODE.close=!1,u(t)}),O.filter(function(t){return"borrar"!==t.nombre&&t.oferta_interna>0||void 0===t.oferta_interna}).append("text").attr("class","node-text").attr("x",10+r.nodeWidth()).attr("y",function(t){return t.dy/2}).attr("dy","0.35em").text(function(t){return t.nombre}).filter(function(t){return 1===t.posicionX}).attr("class","node-text-start").attr("x",-10),c.sort(function(t,e){return t-e}),SANKEY.secciones_header.forEach(function(t,e){d.append("text").filter(function(t){return e>0}).attr("class","chart-encabezado-right").attr("x",function(t){return c[e]+s+10}).text(t[0]),d.append("text").filter(function(t){return e>0}).attr("class","chart-encabezado-right").attr("x",function(t){return c[e]+s+10}).attr("y",19).text(t[1])})},_=function(){return t=$("#sankey").height(),e=$("#sankey").width(),$("#modal_contenido > h1").outerHeight(),$("#modal_contenido > p").outerHeight(),$("#modal_contenido > form").outerHeight(),$("#modal_contenido").outerHeight(),d3.select("#modal_contenido").attr("style",null),SANKEY.anchoNodo=10,SANKEY.separacionNodo=15,SANKEY.size.width=1400,SANKEY.size.height=550,SANKEY.margin.left=150,SANKEY.margin.right=150,SANKEY.margin.top=20,SANKEY.margin.bottom=40,SANKEY.margin.header=15,SANKEY.tooltip.top=15,SANKEY.tooltip.left=155,SANKEY.tooltip.bottom=-15,!0},h=function(){return o=d3.selectAll("#sankey .link"),n=d3.selectAll("#sankey .node"),!0};g(2015,"sankey").then(function(){return _()}).then(function(){return m({nodes:GLOBAL_NODES,links:GLOBAL_LINKS},{margin:SANKEY.margin,separacionNodo:SANKEY.separacionNodo,anchoNodo:SANKEY.anchoNodo,size:SANKEY.size})}).then(function(){return h()}).then(function(){if(!jQuery.browser.mobile)return y(0,"create","next")}).then(function(){return $("#tooltip").fadeOut(100)}).then(function(){for(var t=2015;t>1959;t--)$("select[name=anio]").append('<option value="'+t+'">'+t+"</option>");$("select[name=anio]").SumoSelect({nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"]}),$("select[name=anio]").on("sumo:opened",function(t){$("body").attr("style","position: fixed"),$(".mini-tooltip").remove()}),$("select[name=anio]").on("sumo:closed",function(t){$("body").attr("style","position: relative")}),$("select[name=anio]").on("change",function(t){$(".mini-tooltip").remove(),g($("select[name=anio]")[0].value,"sankey").then(function(){return _()}).then(function(){return $("#sankey").empty()}).then(function(){return m({nodes:GLOBAL_NODES,links:GLOBAL_LINKS},{margin:SANKEY.margin,separacionNodo:SANKEY.separacionNodo,anchoNodo:SANKEY.anchoNodo,size:SANKEY.size})}).then(function(){return h()}).then(function(){return $("#tooltip").fadeOut(100)})}),$(".tooltip_exit").first().on("click",function(t){$("#tooltip").fadeOut(100),f("fadeOut",STATIC_NODE.id,!0)(BUSCAR_NODO(STATIC_NODE.id))}),$(window).on("resize",function(){_()});var e=0;$("#sankey").scroll(function(t){var o=$("#sankey").scrollLeft();e!==o&&($("#tooltip").css({left:function(){return parseInt($(this).css("left").slice(0,-2))-(o-e)+"px"}}),e=o)}),$("#nextYear").on("click",function(t){var e=$("select[name=anio]")[0].sumo.getSelStr(),o=Number(e);o<2015&&$("select[name=anio]")[0].sumo.selectItem(""+(o+1).toString())}),$("#backYear").on("click",function(t){var e=$("select[name=anio]")[0].sumo.getSelStr(),o=Number(e);o>1960&&$("select[name=anio]")[0].sumo.selectItem(""+(o-1).toString())})}),g(null,"glosario").then(function(){$(".tooltip_glosary").hide(),$('button[name="citas"]').css({opacity:0}),$('button[name="glosario"]').on("click",function(t){$(".tooltip_glosary").text(GLOSARIO[STATIC_NODE.id].descripcion).fadeIn("fast"),$(".tooltip_content").hide(),d3.select('button[name="citas"]').transition().attr("style",null),d3.select('button[name="glosario"]').transition().style("opacity",0)}),$('button[name="citas"]').on("click",function(t){$(".tooltip_glosary").hide(),$(".tooltip_content").fadeIn("fast"),d3.select('button[name="citas"]').transition().style("opacity",0),d3.select('button[name="glosario"]').transition().attr("style",null)})})});