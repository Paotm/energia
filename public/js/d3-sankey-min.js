"use strict";d3.sankey=function(){function n(){d.forEach(function(n){n.sourceLinks=[],n.targetLinks=[]}),l.forEach(function(n){var t=n.source,r=n.target;"number"==typeof t&&(t=n.source=d[n.source]),"number"==typeof r&&(r=n.target=d[n.target]),t.sourceLinks.push(n),r.targetLinks.push(n)})}function t(){d.forEach(function(n){n.value=Math.max(d3.sum(n.sourceLinks,s),d3.sum(n.targetLinks,s))})}function r(){for(var n=d,t,r=0;n.length;)t=[],n.forEach(function(n){n.xPos?n.x=n.xPos:n.x=r,n.dx=y,n.sourceLinks.forEach(function(n){t.push(n.target)})}),n=t,++r;e((g[0]-y)/(r-1))}function u(){d.forEach(function(n){n.targetLinks.length||(n.x=d3.min(n.sourceLinks,function(n){return n.target.x})-1)})}function o(n){d.forEach(function(t){t.sourceLinks.length||(t.x=n-1)})}function e(n){d.forEach(function(t){t.x*=n})}function c(n){function t(){var n=d3.min(c,function(n){return(g[1]-(n.length-1)*h)/d3.sum(n,s)});c.forEach(function(t){t.forEach(function(t,r){t.y=r,t.dy=t.value*n})}),l.forEach(function(t){t.dy=t.value*n})}function r(n){function t(n){return f(n.source)*n.value}c.forEach(function(r,u){r.forEach(function(r){if(r.targetLinks.length){var u=d3.sum(r.targetLinks,t)/d3.sum(r.targetLinks,s);r.y+=(u-f(r))*n}})})}function u(n){function t(n){return f(n.target)*n.value}c.slice().reverse().forEach(function(r){r.forEach(function(r){if(r.sourceLinks.length){var u=d3.sum(r.sourceLinks,t)/d3.sum(r.sourceLinks,s);r.y+=(u-f(r))*n}})})}function o(){c.forEach(function(n){var t,r,u=0,o=n.length,c;for(n.sort(e),c=0;c<o;++c)t=n[c],r=u-t.y,r>0&&(t.y+=r),u=t.y+t.dy+h;if((r=u-h-g[1])>0)for(u=t.y-=r,c=o-2;c>=0;--c)t=n[c],r=t.y+t.dy+h-u,r>0&&(t.y-=r),u=t.y})}function e(n,t){return n.y-t.y}var c=d3.nest().key(function(n){return n.x}).sortKeys(d3.ascending).entries(d).map(function(n){return n.values});t(),o();for(var i=1;n>0;--n)u(i*=.99),o(),r(i),o()}function i(){function n(n,t){return n.source.y-t.source.y}function t(n,t){return n.target.y-t.target.y}d.forEach(function(r){r.sourceLinks.sort(t),r.targetLinks.sort(n)}),d.forEach(function(n){var t=0,r=0;n.sourceLinks.forEach(function(n){n.sy=t,t+=n.dy}),n.targetLinks.forEach(function(n){n.ty=r,r+=n.dy})})}function f(n){return n.y+n.dy/2}function s(n){return n.value}var a={},y=24,h=8,g=[1,1],d=[],l=[],k=.5;return a.nodeWidth=function(n){return arguments.length?(y=+n,a):y},a.nodeSpacing=function(n){return arguments.length?(h=+n,a):h},a.nodes=function(n){return arguments.length?(d=n,a):d},a.links=function(n){return arguments.length?(l=n,a):l},a.size=function(n){return arguments.length?(g=n,a):g},a.layout=function(u){return n(),t(),r(),c(u),i(),a},a.relayout=function(){return i(),a},a.link=function(){function n(n){var r=n.source.x+n.source.dx,u=n.target.x,o=d3.interpolateNumber(r,u),e=o(t),c=o(1-t),i=n.source.y+n.sy+n.dy/2,f=n.target.y+n.ty+n.dy/2;return"M"+r+","+i+"C"+e+","+i+" "+c+","+f+" "+u+","+f}var t=.5;return n.curvature=function(r){return arguments.length?(t=+r,n):t},n},a};
//# sourceMappingURL=./d3-sankey-min.js.map