"use strict";d3.sankey=function(){function n(){d.forEach(function(n){n.sourceLinks=[],n.targetLinks=[]}),l.forEach(function(n){var t=n.source,r=n.target;"number"==typeof t&&(t=n.source=d[n.source]),"number"==typeof r&&(r=n.target=d[n.target]),t.sourceLinks.push(n),r.targetLinks.push(n)})}function t(){d.forEach(function(n){n.value=Math.max(d3.sum(n.sourceLinks,f),d3.sum(n.targetLinks,f))})}function r(n){function t(n){function t(n){return n.source,0*n.value}e.forEach(function(r,u){r.forEach(function(r){if(r.targetLinks.length){var u=d3.sum(r.targetLinks,t)/d3.sum(r.targetLinks,f);r.x+=(u-0)*n}})})}function r(n){function t(n){return n.target,0*n.value}e.slice().reverse().forEach(function(r){r.forEach(function(r){if(r.sourceLinks.length){var u=d3.sum(r.sourceLinks,t)/d3.sum(r.sourceLinks,f);r.x+=(u-0)*n}})})}function u(){e.forEach(function(n){var t,r,u=0,e=n.length,c;for(n.sort(o),c=0;c<e;++c)t=n[c],r=u-t.x,r>0&&(t.x+=r),u=t.x+t.dy+h;if((r=u-h-g[0])>0)for(u=t.x-=r,c=e-2;c>=0;--c)t=n[c],r=t.x+t.dy+h-u,r>0&&(t.x-=r),u=t.x})}function o(n,t){return n.x-t.x}var e=d3.nest().key(function(n){return n.y}).sortKeys(d3.ascending).entries(d).map(function(n){return n.values}),c=(g[0]-(e[0].length-1)*h)/d3.sum(e[0],f);e.forEach(function(n){n.forEach(function(n,t){n.x=t,n.dy=n.value*c})}),l.forEach(function(n){n.dy=n.value*c}),u();for(var i=1;n>0;--n)t(i),u(),r(i*=.99),u()}function u(n){d.forEach(function(t){t.sourceLinks.length||(t.y=n-1)})}function o(n){d.forEach(function(t){t.y*=n})}function e(){for(var n=d,t,r=0;n.length;)t=[],n.forEach(function(n){n.y=r,n.sourceLinks.forEach(function(n){t.indexOf(n.target)<0&&t.push(n.target)})}),n=t,++r;u(r),o((g[1]-s)/(r-1))}function c(){function n(n,t){return n.source.x-t.source.x}function t(n,t){return n.target.x-t.target.x}d.forEach(function(r){r.sourceLinks.sort(t),r.targetLinks.sort(n)}),d.forEach(function(n){var t=0,r=0;n.sourceLinks.forEach(function(n){n.sy=t,t+=n.dy}),n.targetLinks.forEach(function(n){n.ty=r,r+=n.dy})})}function i(n){return 0}function f(n){return n.value}var a={},s=24,h=8,g=[1,1],d=[],l=[];return a.nodeWidth=function(n){return arguments.length?(s=+n,a):s},a.nodePadding=function(n){return arguments.length?(h=+n,a):h},a.nodes=function(n){return arguments.length?(d=n,a):d},a.links=function(n){return arguments.length?(l=n,a):l},a.size=function(n){return arguments.length?(g=n,a):g},a.layout=function(u){return n(),t(),e(),r(u),c(),a},a.relayout=function(){return c(),a},a.link=function(){function n(n){var r=n.source.x+n.sy+n.dy/2,u=n.target.x+n.ty+n.dy/2,o=n.source.y+s,e=n.target.y,c=d3.interpolateNumber(o,e);return"M"+r+","+o+"C"+r+","+c(t)+" "+u+","+c(1-t)+" "+u+","+e}var t=.5;return n.curvature=function(r){return arguments.length?(t=+r,n):t},n},a};
//# sourceMappingURL=./d3-verticalSankey-min.js.map