"use strict";d3.sankey=function(){function n(){function n(n){return[].concat.apply([],n)}function t(){for(var n=l,t,r,e=0;n.length;)t=[],r={},n.forEach(function(n){n.x=e,n.scc.forEach(function(e){e.sourceLinks.forEach(function(e){r.hasOwnProperty(e.target.component)||e.target.component==n.index||(t.push(l[e.target.component]),r[e.target.component]=!0)})})}),n=t,++e}function r(n,t){for(var r=[n],e=1,o=0,u=0;e>0;){var c=r.shift();if(e--,!c.hasOwnProperty("x")){c.x=u,c.dx=s;var i=t(c);r=r.concat(i),o+=i.length}0==e&&(u++,e=o,o=0)}}t(),l.forEach(function(n,t){r(n.root,function(n){return n.sourceLinks.filter(function(n){return n.target.component==t}).map(function(n){return n.target})})});var o=0,u=d3.nest().key(function(n){return n.root.pos}).sortKeys(d3.ascending).entries(l).map(function(n){return n.values}),o=-1,c=-1;u.forEach(function(n){n.forEach(function(n){n.x=o+1,n.scc.forEach(function(t){t.layer?t.x=t.layer:t.x=n.x+t.x,c=Math.max(c,t.x)})}),o=c}),h.filter(function(n){return 0==n.sourceLinks.filter(function(n){return n.source.name!=n.target.name}).length}).forEach(function(n){n.x=o}),e((d[0]-s)/Math.max(o,1))}function t(){h.forEach(function(n){n.targetLinks.length||(n.x=d3.min(n.sourceLinks,function(n){return n.target.x})-1)})}function r(n){h.forEach(function(t){t.sourceLinks.length||(t.x=n-1)})}function e(n){h.forEach(function(t){t.x*=n})}function o(n){function t(){var n=d3.min(f,function(n){return(d[1]-(n.length-1)*y)/d3.sum(n,a)});f.forEach(function(t){t.forEach(function(t,r){t.y=r,t.dy=t.value*n})}),g.forEach(function(t){t.dy=t.value*n})}function r(n){function t(n){return i(n.source)*n.value}f.forEach(function(r,e){r.forEach(function(r){if(r.targetLinks.length){var e=d3.sum(r.targetLinks,t)/d3.sum(r.targetLinks,a);r.y+=(e-i(r))*n}})})}function e(n){function t(n){return i(n.target)*n.value}f.slice().reverse().forEach(function(r){r.forEach(function(r){if(r.sourceLinks.length){var e=d3.sum(r.sourceLinks,t)/d3.sum(r.sourceLinks,a);r.y+=(e-i(r))*n}})})}function o(){f.forEach(function(n){var t,r,e=0,o=n.length,c;for(n.sort(u),c=0;c<o;++c)t=n[c],r=e-t.y,r>0&&(t.y+=r),e=t.y+t.dy+y;if((r=e-y-d[1])>0)for(e=t.y-=r,c=o-2;c>=0;--c)t=n[c],r=t.y+t.dy+y-e,r>0&&(t.y-=r),e=t.y})}function c(n,t){return t.y-n.y}var f=d3.nest().key(function(n){return n.x}).sortKeys(d3.ascending).entries(h).map(function(n){return n.values});t(),o();for(var s=1;n>0;--n)r(1),o(),e(1),o()}function u(n,t){var r=n.value,e=t.value;return r<e?1:r>e?-1:0}function c(){function n(n,t){return t.source.y-n.source.y}function t(n,t){return t.target.y-n.target.y}h.forEach(function(n){n.sourceLinks.sort(u),n.targetLinks.sort(u)}),h.forEach(function(n){var t=0,r=0;n.sourceLinks.forEach(function(n){n.sy=t,t+=n.dy}),n.targetLinks.forEach(function(n){n.ty=r,r+=n.dy})})}function i(n){return n.y+n.dy/2}function a(n){return n.value}var f={},s=24,y=30,d=[1,1],h=[],g=[],l=[];f.nodeWidth=function(n){return arguments.length?(s=+n,f):s},f.nodePadding=function(n){return arguments.length?(y=+n,f):y},f.nodes=function(n){return arguments.length?(h=n,f):h},f.links=function(n){return arguments.length?(g=n,f):g},f.size=function(n){return arguments.length?(d=n,f):d},f.layout=function(t){return x(),v(),k(),n(),o(t),c(),f},f.relayout=function(){return c(),f},f.reversibleLink=function(){function n(n,t){var e=t.source.x+t.source.dx,o=t.target.x,u=d3.interpolateNumber(e,o),c=u(r),i=u(1-r),a=t.source.y+t.sy,f=t.target.y+t.ty,s=t.source.y+t.sy+t.dy,y=t.target.y+t.ty+t.dy;switch(n){case 0:return"M"+e+","+a+"L"+e+","+(a+t.dy);case 1:return"M"+e+","+a+"C"+c+","+a+" "+i+","+f+" "+o+","+f+"L"+o+","+y+"C"+i+","+y+" "+c+","+s+" "+e+","+s+"Z";case 2:return"M"+o+","+f+"L"+o+","+(f+t.dy)}}function t(n,t){function r(n){return n.source.y+n.sy>n.target.y+n.ty?-1:1}function e(n,t){return n+","+t+" "}var o=30,u=15,c=15*r(t),i=t.source.x+t.source.dx,a=t.source.y+t.sy,f=t.target.x,s=t.target.y+t.ty;switch(n){case 0:return"M"+e(i,a)+"C"+e(i,a)+e(i+30,a)+e(i+30,a+c)+"L"+e(i+30,a+c+t.dy)+"C"+e(i+30,a+t.dy)+e(i,a+t.dy)+e(i,a+t.dy)+"Z";case 1:return"M"+e(i+30,a+c)+"C"+e(i+30,a+3*c)+e(f-30,s-3*c)+e(f-30,s-c)+"L"+e(f-30,s-c+t.dy)+"C"+e(f-30,s-3*c+t.dy)+e(i+30,a+3*c+t.dy)+e(i+30,a+c+t.dy)+"Z";case 2:return"M"+e(f-30,s-c)+"C"+e(f-30,s)+e(f,s)+e(f,s)+"L"+e(f,s+t.dy)+"C"+e(f,s+t.dy)+e(f-30,s+t.dy)+e(f-30,s+t.dy-c)+"Z"}}var r=.5;return function(r){return function(e){return e.source.x<e.target.x?n(r,e):t(r,e)}}},f.link=function(){function n(n){var r=n.source.x+n.source.dx,e=n.target.x,o=d3.interpolateNumber(r,e),u=o(t),c=o(1-t),i=n.source.y+n.sy+n.dy/2,a=n.target.y+n.ty+n.dy/2;return"M"+r+","+i+"C"+u+","+i+" "+c+","+a+" "+e+","+a}var t=.5;return n.curvature=function(r){return arguments.length?(t=+r,n):t},n};var x=function n(){var t=void 0,r=void 0;h.forEach(function(n){n.sourceLinks=[],n.targetLinks=[]}),g.forEach(function(n){t=n.source=h[parseInt(n.source)],r=n.target=h[parseInt(n.target)],t.sourceLinks.push(n),r.targetLinks.push(n)})},v=function n(){var t=void 0;h.forEach(function(n){n.value||(t=Math.max(d3.sum(n.sourceLinks,a),d3.sum(n.targetLinks,a)),n.value=t)})},k=function n(){var t=[],r=0,e=function n(e){e.lowIndex=e.index=r++,e.onStack=!0,t.push(e);var o=void 0;if(e.sourceLinks&&(e.sourceLinks.forEach(function(t){o=t.target,o.hasOwnProperty("index")?o.onStack&&(e.lowIndex=Math.min(e.lowIndex,o.index)):(n(o),e.lowIndex=Math.min(e.lowIndex,o.lowIndex))}),e.lowIndex===e.index)){var u=[],c;do{c=t.pop(),c.onStack=!1,u.push(c)}while(c!=e);l.push({root:e,scc:u})}};h.forEach(function(n){n.index||e(n)}),l.forEach(function(n,t){n.index=t,n.scc.forEach(function(n){n.component=t})})};return f};
//# sourceMappingURL=./d3-sankeyNew-min.js.map