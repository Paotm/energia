'use strict';

var colores = ['#ffbb42', '#808080', '#f1854b', '#f2385a'];

//  Variables Globales
// let scaleColorLink  = d3.scaleOrdinal()
//   .range('white')
//   // .range(colores)
//   .domain('Energías Primarias', 'Centros de Transformación', 'Energías Secundarias', 'Consumo');
var fontScale = d3.scaleLinear().range([8, 16]);

//  Funciones
// const formatoNumero = (d) => {
//   let format = d3.format(',.0f');
//
//   return `${ format(d) } Twh`;
// };

/* Resta el porcentaje indicado a un color (RR, GG o BB) hexadecimal para oscurecerlo */
var subtractLight = function subtractLight(color, amount) {
  var cc = parseInt(color, 16) - amount;
  var c = cc < 0 ? 0 : cc;
  c = c.toString(16).length > 1 ? c.toString(16) : '0' + c.toString(16);

  return c;
};

/* Oscurece un color hexadecimal de 6 caracteres #RRGGBB segun el porcentaje indicado */
var darken = function darken(color, amount) {
  color = color.indexOf('#') >= 0 ? color.substring(1, color.length) : color;
  amount = parseInt(255 * amount / 100);
  color = '#' + subtractLight(color.substring(0, 2), amount) + subtractLight(color.substring(2, 4), amount) + subtractLight(color.substring(4, 6), amount);

  return color;
};

$(function () {

  var height = $('#sankey').height(),
      width = $('#sankey').width(),

  // clavesNodos = [],
  // dataSankey  = {},
  // moveId = 0,
  nodesOri = void 0,
      linksOri = void 0,
      nodesGlo = void 0,
      linksGlo = void 0,
      sankeyChartD3 = void 0,
      path = void 0,
      svg = void 0;

  //  Funciones
  // const generarPuertas    = () => {
  //   dataSankey.nodes.filter((element) => (element.parent === false)).forEach((v, k) => {
  //     clavesNodos.push({ 'id': v.id, 'state': true });
  //   });
  // };
  var createGrafico = function createGrafico(data, container) {
    // Variables
    var margin = { top: 0, right: 0, bottom: 0, left: 0 };
    var size = { width: 300 - margin.left - margin.right, height: 50 - margin.top - margin.bottom };
    var years = ['2012', '2013', '2014', '2015', '2016', '2017'];
    var newData = [];

    data.forEach(function (v, k) {
      newData.push({ date: new Date(years[k]), value: v });
    });

    var svgGrafico = container.html('').append('svg').attr('width', size.width + margin.left + margin.right).attr('height', size.height + margin.top + margin.bottom).append('g').attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')');

    // let parseTime = d3.timeParse('%d-%b-%y');

    var x = d3.scaleTime().domain(d3.extent(newData, function (d) {
      return d.date;
    })).rangeRound([0, size.width]);
    var y = d3.scaleLinear().domain(d3.extent(newData, function (d) {
      return d.value;
    })).rangeRound([size.height, 0]);

    var line = d3.line().x(function (d) {
      return x(d.date);
    }).y(function (d) {
      return y(d.value);
    });

    svgGrafico.append('g').call(d3.axisBottom(x)).style('transform', 'translate(0px, ' + (size.height - 1) + 'px)');

    svgGrafico.append('g').call(d3.axisLeft(y));
    // .append('text')
    //   .attr('fill', '#000')
    //   .attr('transform', 'rotate(-90)')
    //   .attr('y', 6)
    //   .attr('dy', '0.71em')
    //   .attr('text-anchor', 'end')
    //   .text('Price ($)');

    svgGrafico.append('path').datum(newData).attr('fill', 'none').attr('stroke', 'steelblue').attr('stroke-linejoin', 'round').attr('stroke-linecap', 'round').attr('stroke-width', 1.5).attr('d', line);
  };
  var updatePlaca = function updatePlaca(element) {
    var contenedor = d3.select('#placa');
    contenedor.select('.placa_titulo').style('text-transform', 'uppercase').text(element.name);
    contenedor.select('.placa_prod').text(element.value);
    contenedor.select('.placa_imp').text(element.value * 0.2);
    contenedor.select('.placa_exp').text(element.value * 0.1);
    contenedor.select('.placa_lost').text(element.value * 0.05);
    contenedor.select('.placa_efi').text((element.value - element.value * 0.05) * 100 / element.value);
    contenedor.select('.placa_more').text(element.value * 0.01);

    createGrafico(element.prod, contenedor.select('.placa_grafico.grafico_prod'));
    createGrafico(element.imp, contenedor.select('.placa_grafico.grafico_imp'));
    createGrafico(element.exp, contenedor.select('.placa_grafico.grafico_exp'));
  };

  var fadeIn = function fadeIn(opacity) {
    return function (g, i) {
      updatePlaca(g);

      var id_nodes = [],
          links = void 0,
          linksFilter = void 0,
          nodes = void 0,
          nodesFilter = void 0;

      // add event node
      id_nodes.push(g.id);
      // add sourceLinks
      g.sourceLinks.forEach(function (link) {
        id_nodes.push(link.target.id);
      });
      // add targetLinks
      g.targetLinks.forEach(function (link) {
        id_nodes.push(link.source.id);
      });

      // select links
      links = d3.selectAll('#sankey .link');
      //  links focusIn
      // d3.selectAll('#sankey .link')
      //   .filter((d) => (d.source.id === g.id || d.target.id === g.id))
      //   .transition().style('stroke-opacity', .75);
      // links focusOut
      linksFilter = links.filter(function (d) {
        return d.source.id !== g.id && d.target.id !== g.id;
      });
      linksFilter.transition().style('stroke-opacity', opacity);

      //  select nodes
      nodes = d3.selectAll('#sankey .node');
      // nodes focusIn
      nodesFilter = nodes.filter(function (d) {
        var statusNode = false;

        id_nodes.forEach(function (element) {
          if (element === d.id) {
            statusNode = true;
          }
        });

        return statusNode;
      });
      nodesFilter.select('rect').transition().style('fill', function (d) {
        return darken('white', 20);
      });
      // nodesFilter.select('rect').transition().style('fill', (d) => darken(colores[d.pos - 1], 20));
      nodesFilter.select('text').transition().attr('text-anchor', 'middle').attr('y', -10)
      // .text((d) => (d.name))
      .attr('x', function (d) {
        return d.dx / 2;
      });
      // nodes focusOut
      nodesFilter = nodes.filter(function (d) {
        var statusNode = true;

        id_nodes.forEach(function (element) {
          if (element === d.id) {
            statusNode = false;
          }
        });

        return statusNode;
      });
      nodesFilter.transition().style('opacity', opacity);
    };
  };
  var fadeOut = function fadeOut(opacity) {
    return function (g, i) {

      var id_nodes = [],
          links = void 0,
          linksFilter = void 0,
          nodes = void 0,
          nodesFilter = void 0;

      // add event node
      id_nodes.push(g.id);
      // add sourceLinks
      g.sourceLinks.forEach(function (link) {
        id_nodes.push(link.target.id);
      });
      // add targetLinks
      g.targetLinks.forEach(function (link) {
        id_nodes.push(link.source.id);
      });

      // select links
      links = d3.selectAll('#sankey .link');
      //  links focusIn
      // d3.selectAll('#sankey .link')
      //   .filter((d) => (d.source.id === g.id || d.target.id === g.id))
      //   .transition().style('stroke-opacity', .75);
      // links focusOut
      linksFilter = links.filter(function (d) {
        return d.source.id !== g.id && d.target.id !== g.id;
      });
      linksFilter.transition().style('stroke-opacity', 0.75);

      //  select nodes
      nodes = d3.selectAll('#sankey .node');
      // nodes focusIn
      nodesFilter = nodes.filter(function (d) {
        var statusNode = false;

        id_nodes.forEach(function (element) {
          if (element === d.id) {
            statusNode = true;
          }
        });

        return statusNode;
      });
      nodesFilter.select('rect').transition().style('fill', function (d) {
        return 'white';
      });
      // .style('fill', (d) => colores[d.pos - 1]);
      nodesFilter.select('text').transition().attr('text-anchor', 'end').attr('y', function (d) {
        return d.dy / 2;
      }).attr('x', -10)
      // .text((d) => (d.name.length > 8) ? (d.name.substring(0, 5) + '...') : (d.name))
      .filter(function (d) {
        return d.x < width / 2;
      }).attr('x', 10 + sankeyChartD3.nodeWidth()).attr('text-anchor', 'start');
      // nodes focusOut
      nodesFilter = nodes.filter(function (d) {
        var statusNode = true;

        id_nodes.forEach(function (element) {
          if (element === d.id) {
            statusNode = false;
          }
        });

        return statusNode;
      });
      nodesFilter.transition().style('opacity', 1);
    };
  };
  // const colapsarExpandirNodo = (nodo) => {
  //
  //   nodesOri[nodo.id].group = (nodesOri[nodo.id].group) ? (false) : (true);
  //
  //   return nodesOri;
  //
  //
  //   // let oldLinks = dataSankey.links;
  //
  //   // if (nodo.parent === false) {
  //   //   console.log('Se expande nodo');
  //   //   clavesNodos.forEach((element) => { if (element.id === nodo.id + moveId) { element.state = false; } });
  //   //
  //   //   dataSankey.nodes = nodosOriginales;
  //   //   dataSankey.links = linksOriginales;
  //   //
  //   //   dataSankey.links = declareGroupLinks(dataSankey.links, true);
  //   //
  //   //   dataSankey = buscarNodes(dataSankey.nodes, dataSankey.links);
  //   //   moveId = 0;
  //   //   $('#sankey').empty();
  //   //   dibujarSankey(width, height, dataSankey);
  //   //   // actualizarSankey($('#content').width(), $('#content').height(), dataSankey, oldLinks);
  //   // } else {
  //   //   console.log('Se colapsa nodo');
  //   //   // let parent = dataSankey.nodes.filter((element) => (element.name === nodo.parent))[0];
  //   //   // clavesNodos.filter((element) => (element.id === parent.id))[0].state = true;
  //   //   //
  //   //   // dataSankey = buscarNodes(nodosOriginales, dataSankey.links = declareGroupLinks(linksOriginales));
  //   //   //
  //   //   // $('#sankey').empty();
  //   //   // dibujarSankey(width, height, dataSankey);
  //   //   // actualizarSankey($('#content').width(), $('#content').height(), dataSankey, oldLinks);
  //   // }
  // };
  var createBackButton = function createBackButton(node) {
    console.log(node);
    var button = d3.select('#placa .agrup').append('div').attr('id', function () {
      return 'node_' + node.id;
    }).attr('class', 'backButton').on('click', function (event) {
      if (nodesOri[node.id].group) {
        nodesOri[node.id].group = false;
      } else {
        nodesOri[node.id].group = true;
      }

      $('#node_' + node.id).remove();

      preSankey();
    });

    button.append('span').attr('class', 'backButton_text').text(node.name);
    button.append('span').append('i').attr('class', 'fa fa-times').attr('aria-hidden', 'true').style('margin-left', '10px');
  };
  var dibujarSankey = function dibujarSankey(width, heigth, data) {

    // Variables
    var margin = { top: 50, right: 50, bottom: 50, left: 50 };
    var size = { width: width - margin.left - margin.right, height: heigth - margin.top - margin.bottom };
    var anchoNodo = 20;
    var separacionNodo = 20;

    $('#sankey').empty();

    // Creación SVG
    svg = d3.select('#sankey').append('svg').attr('width', size.width + margin.left + margin.right).attr('height', size.height + margin.top + margin.bottom).append('g').attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')');

    // Creación Sankey
    sankeyChartD3 = d3.sankey().nodeWidth(anchoNodo).nodePadding(separacionNodo).size([size.width, size.height]).nodes(data.nodes).links(data.links).layout();

    // const generarGradientes = (colores) => {
    //   let keys = {};
    //
    //   colores.forEach((v, k) => {
    //
    //     colores.forEach((v2, k2) => {
    //
    //       keys[`${ k + 1 }${ k2 + 1 }`] = [v, v2];
    //     });
    //   });
    //
    //   return keys;
    // };
    //
    // let keys = generarGradientes(colores);
    //
    // console.log(keys);
    //
    // for (let key in keys) {
    //
    //   eval(`let key_${ key } = svg.append('defs')
    //     .append('linearGradient')
    //       .attr('id', 'key_${ key }')
    //       .attr('x1', '0%')
    //       .attr('x2', '100%')
    //       .attr('spreadMethod', 'pad');
    //     key_${ key }.append('stop')
    //         .attr('offset', '0%')
    //         .attr('stop-color', '${ keys[key][0] }')
    //         .attr('stop-opacity', 1);
    //     key_${ key }.append('stop')
    //         .attr('offset', '100%')
    //         .attr('stop-color', '${ keys[key][1] }')
    //         .attr('stop-opacity', 1);`);
    // }

    // Creación de Links
    path = sankeyChartD3.link();

    fontScale.domain(d3.extent(data.nodes, function (d) {
      return d.value;
    }));

    //  Se crean links
    var link = svg.append('g').attr('id', 'links').selectAll('.link').data(data.links).enter().append('path').attr('class', 'link').attr('d', path).style('stroke-width', function (d) {
      return Math.max(1, d.dy);
    })
    // .style('stroke', 'silver')
    // trabajando
    .style('stroke', function (d) {
      return 'silver';
    })
    // .style('stroke', (d) => {
    //   let key = [d.source.pos, d.target.pos];
    //
    //   return `url(#key_${ key[0] }${ key[1] })`;
    // })
    .style('stroke-opacity', 0.75).on('mouseover', function (d) {
      d3.select(d3.event.target).style('stroke-opacity', 1);
    }).on('mouseout', function (d) {
      d3.select(d3.event.target).style('stroke-opacity', 0.75);
    }).sort(function (a, b) {
      return b.dy - a.dy;
    });

    link.filter(function (element) {
      return element.target.name === 'EXPORTACIONES' || element.target.name === 'CONSUMO PROPIO' || element.target.name === 'TRANSPORTE' || element.target.name === 'PERDIDA';
    }).style('stroke', '#BA3F1D');
    link.filter(function (element) {
      return element.source.name === 'IMPORTACIONES';
    }).style('stroke', 'green');

    // Se crean nodos
    var node = svg.append('g').attr('id', 'nodes').selectAll('.node').data(data.nodes.filter(function (element) {
      return element.sourceLinks.length !== 0 || element.targetLinks.length !== 0;
    })).enter().append('g').attr('id', function (d) {
      return d.id;
    }).attr('class', 'node').attr('transform', function (d) {
      return 'translate(' + d.x + ', ' + d.y + ')';
    }).call(d3.drag().on('drag', dragmove));
    // Se crean rectangulos nodos
    node.append('rect').attr('width', sankeyChartD3.nodeWidth()).attr('height', function (d) {
      return Math.max(10, d.dy);
    }).style('stroke', function (d) {
      return 'silver';
    }).style('fill', function (d) {
      return 'white';
    })
    // .style('fill', (d) => colores[d.pos - 1])
    .on('mouseover', fadeIn(0.025)).on('mouseout', fadeOut()).on('dblclick', function (e) {

      if (nodesOri[e.id].group) {
        nodesOri[e.id].group = false;
      } else {
        nodesOri[e.id].group = true;
      }
      createBackButton(e);
      preSankey();
    });

    // Se crean textos nodos
    node.append('text').attr('x', -10).attr('text-anchor', 'end').attr('y', function (d) {
      return d.dy / 2;
    }).attr('dy', '.35em').style('fill', 'black')
    // .style('fill', (d) => colores[d.pos - 1])
    .style('font-size', '14px').style('font-weight', 'normal')
    // .style('font-size', (d) => `${ Math.floor(fontScale(d.value)) }px`)
    .text(function (d) {
      return d.name;
    })
    // .text((d) => (d.name.length > 8) ? (d.name.substring(0, 5) + '...') : (d.name))
    .filter(function (d) {
      return d.x < width / 2;
    }).attr('x', 10 + sankeyChartD3.nodeWidth()).attr('text-anchor', 'start');
    // Se agrega texto referencia hover link
    link.append('title').text(function (d) {
      return d.source.name + ' (' + d.source.id + ') \u2192 ' + d.target.name + ' (' + d.target.id + ') \u2192 ' + d.value;
    });
    // Se agrega texto referencia hover node
    // node.append('title').text((d) => `${ d.name } (${ d.id })`);

    // the function for moving the nodes
    function dragmove(d) {
      d3.select(this).attr('transform', 'translate(' + (d.x = Math.max(0, Math.min(size.width - d.dx, d3.event.x))) + ', ' + (d.y = Math.max(0, Math.min(size.height - d.dy, d3.event.y))) + ')');
      sankeyChartD3.relayout();
      link.attr('d', path);
    }
  };

  var actualizarSankey = function actualizarSankey(width, heigth, data, oldLinks) {
    var linksDiff = function linksDiff(links_old, links_new) {
      console.log(links_old);
      console.log(links_new);
      var links = [],
          source = void 0,
          target = void 0;

      links_new.forEach(function (v, k) {
        source = v.source;
        target = v.target;

        links_old.forEach(function (v, k) {
          if (source !== v.source.id || target !== v.target.id) {
            links.push(v);
          }
        });
      });

      return links;
    };

    // let newNodes = nodesDiff(data, sankeyData);
    // let newLinks = linksDiff(oldLinks, data.links);

    // Parametros
    var margin = {
      top: 0,
      right: 0,
      bottom: 0,
      left: 0
    };
    var size = {
      width: width - margin.left - margin.right,
      height: heigth - margin.top - margin.bottom
    };

    // Creación Sankey
    sankeyChartD3 = d3.sankey().nodeWidth(20) // Ancho nodo
    .size([size.width, size.height]).nodes(data.nodes).links(data.links).layout(32);

    sankeyChartD3.relayout();

    // Creación de Links
    path = sankeyChartD3.link();
    $('#links').empty();

    var links = d3.select('#links').selectAll('.link').data(data.links).enter();

    links.append('path').attr('class', 'link').attr('d', function (d) {
      return path(d);
    }).style('stroke-width', function (d) {
      return d.dy;
    }).style('stroke', 'gray').on('mouseover', function (d) {
      // console.log(d3.event);
      d3.select(d3.event.target).style('stroke', 'red');
    }).on('mouseout', function (d) {
      d3.select(d3.event.target).style('stroke', 'gray');
    });

    // d3.selectAll('.link')
    //   .data(data.links)
    //   .attr('d', (d) => path(d));
    d3.selectAll('.node').data(data.nodes)
    // .transition()
    .attr('transform', function (d) {
      return 'translate(' + d.x + ', ' + d.y + ')';
    });
    d3.selectAll('rect').data(data.nodes).style('opacity', 0).attr('width', sankeyChartD3.nodeWidth()).attr('height', function (d) {
      return d.dy;
    }).transition().style('opacity', 1);

    // Create Diference
    // newLinks.forEach((v, k) => {
    //   let link = d3.select('#links')
    //     .append('path')
    //       .attr('class', 'link')
    //       .attr('d', () => path(v))
    //       .style('stroke-width', () => Math.max(1, v.dy))
    //       .style('stroke', () => scaleColor(v.source.name.replace(' ', '')))
    //       .sort((a, b) => (b.dy - a.dy));
    //
    //   link.append('title').text(() => `${ v.source.name } → ${ v.target.name } \n ${ formatoNumero(v.value) }`);
    // });
  };
  var maxParent = function maxParent(nodo) {
    // console.log(nodo);
    var parentNode = nodesGlo.filter(function (element) {
      return element.id === nodo.parent;
    })[0];

    if (nodo.parent !== false) {
      if (typeof parentNode !== 'undefined' && parentNode.group === true) {
        return maxParent(nodesGlo.filter(function (element) {
          return element.id === nodo.parent;
        })[0]);
      } else {
        return nodo;
      }
    } else {
      return nodo;
    }
  };
  var deleteEmptyNodes = function deleteEmptyNodes() {
    var del = 0,
        nodesDelete = [],
        status = void 0;

    // moveId = 0;

    nodesGlo.forEach(function (node, nodeI) {
      // console.log('nodo: ' + nodeI + ' ( id: ' + node.id + ')');
      status = false;

      // Consulto si el nodo se utiliza en algun link
      linksGlo.forEach(function (link, linkI) {
        if (node.id === link.source) {
          status = true;
          link.source = link.source - del;
        }
        if (node.id === link.target) {
          status = true;
          link.target = link.target - del;
        }
      });

      // // Modificar el ID restando la cantidad de elementos borrados
      // node.id = node.id - del;

      if (!status) {
        // console.log('Borrar');
        nodesDelete.push(nodeI);
        del++;
      }
      // else {
      //   // console.log('nodo: ' + nodeI + ' ( id: ' + node.id + ')<-');
      // }
    });

    nodesDelete.reverse().forEach(function (node) {
      nodesGlo.splice(node, 1);
    });

    // moveId = del;
    // nodes.forEach((node, nodeI) => {
    //   console.log('nodo: ' + nodeI + ' ( id: ' + node.id + ')');
    // });

    // console.log(links);
    return nodesGlo;
  };

  var declareGroupLinks = function declareGroupLinks() {
    var desarrollo = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

    var links = [],
        source = void 0,
        parentSource = void 0,
        stateSource = void 0,
        target = void 0,
        parentTarget = void 0,
        stateTarget = void 0,
        nodoExistente = void 0,
        addSource = void 0,
        addTarget = void 0,
        addValue = void 0;

    linksGlo.forEach(function (v, k) {
      //Se obtiene source y target del elemento
      source = nodesGlo.filter(function (element) {
        return element.id === parseInt(v.source);
      })[0];
      target = nodesGlo.filter(function (element) {
        return element.id === parseInt(v.target);
      })[0];
      //Se guarda source-padre y target-padre
      parentSource = maxParent(source);
      parentTarget = maxParent(target);
      //Se guarda source-state y target-state
      stateSource = parentSource.group;
      stateTarget = parentTarget.group;
      //Se guarda source y link a crear
      addSource = stateSource ? parentSource : source;
      addTarget = stateTarget ? parentTarget : target;
      addValue = parseInt(v.value);
      //Se consulta si el nodo existe
      nodoExistente = links.filter(function (element) {
        return element.source === addSource.id && element.target === addTarget.id;
      });

      if (nodoExistente.length !== 0) {
        //Se suma valor a duplicado
        nodoExistente[0].value += addValue;
      } else {
        //Se creo nuevo link
        links.push({
          'source': addSource.id,
          'target': addTarget.id,
          'value': addValue
        });
      }
    });
    return links;
  };

  var preSankey = function preSankey() {
    linksGlo = $.extend(true, [], linksOri);
    nodesGlo = $.extend(true, [], nodesOri);
    linksGlo = declareGroupLinks();
    nodesGlo = deleteEmptyNodes();

    dibujarSankey(width, height, { 'nodes': nodesGlo, 'links': linksGlo });
  };

  var init = function init() {

    var downloadFile = function downloadFile() {
      console.log('Se solicitan archivos'); // Borrar

      var formatoSankey = function formatoSankey(elemento, data) {
        var processData = [];

        switch (elemento) {
          case 'nodos':
            data.forEach(function (v, k) {
              processData.push({
                'id': parseInt(v.id),
                'name': v.name,
                'parent': v.parent === 'null' ? false : parseInt(v.parent),
                'category': v.category,
                'pos': parseInt(v.position),
                'group': v.group === 'true' ? true : false,
                'imp': v.importation.split(';').map(function (element) {
                  return parseInt(element);
                }),
                'exp': v.exportation.split(';').map(function (element) {
                  return parseInt(element);
                }),
                'prod': v.production.split(';').map(function (element) {
                  return parseInt(element);
                })
              });
            });
            break;
          case 'links':
            data.forEach(function (v, k) {
              processData.push({
                'source': parseInt(v.source),
                'target': parseInt(v.target),
                'value': parseInt(v.value)
              });
            });
            break;
        }

        return processData;
      };

      var promise = new Promise(function (success) {
        d3.csv('public/src/nodes.csv', function (nodos) {
          nodesOri = formatoSankey('nodos', nodos);

          d3.csv('public/src/links.csv', function (links) {
            linksOri = formatoSankey('links', links);

            success();
          });
        });
      });

      return promise;
    };

    downloadFile().then(function () {
      preSankey();
    });
  };

  init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJjb2xvcmVzIiwiZm9udFNjYWxlIiwiZDMiLCJzY2FsZUxpbmVhciIsInJhbmdlIiwic3VidHJhY3RMaWdodCIsImNvbG9yIiwiYW1vdW50IiwiY2MiLCJwYXJzZUludCIsImMiLCJ0b1N0cmluZyIsImxlbmd0aCIsImRhcmtlbiIsImluZGV4T2YiLCJzdWJzdHJpbmciLCIkIiwiaGVpZ2h0Iiwid2lkdGgiLCJub2Rlc09yaSIsImxpbmtzT3JpIiwibm9kZXNHbG8iLCJsaW5rc0dsbyIsInNhbmtleUNoYXJ0RDMiLCJwYXRoIiwic3ZnIiwiY3JlYXRlR3JhZmljbyIsImRhdGEiLCJjb250YWluZXIiLCJtYXJnaW4iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJzaXplIiwieWVhcnMiLCJuZXdEYXRhIiwiZm9yRWFjaCIsInYiLCJrIiwicHVzaCIsImRhdGUiLCJEYXRlIiwidmFsdWUiLCJzdmdHcmFmaWNvIiwiaHRtbCIsImFwcGVuZCIsImF0dHIiLCJ4Iiwic2NhbGVUaW1lIiwiZG9tYWluIiwiZXh0ZW50IiwiZCIsInJhbmdlUm91bmQiLCJ5IiwibGluZSIsImNhbGwiLCJheGlzQm90dG9tIiwic3R5bGUiLCJheGlzTGVmdCIsImRhdHVtIiwidXBkYXRlUGxhY2EiLCJlbGVtZW50IiwiY29udGVuZWRvciIsInNlbGVjdCIsInRleHQiLCJuYW1lIiwicHJvZCIsImltcCIsImV4cCIsImZhZGVJbiIsIm9wYWNpdHkiLCJnIiwiaSIsImlkX25vZGVzIiwibGlua3MiLCJsaW5rc0ZpbHRlciIsIm5vZGVzIiwibm9kZXNGaWx0ZXIiLCJpZCIsInNvdXJjZUxpbmtzIiwibGluayIsInRhcmdldCIsInRhcmdldExpbmtzIiwic291cmNlIiwic2VsZWN0QWxsIiwiZmlsdGVyIiwidHJhbnNpdGlvbiIsInN0YXR1c05vZGUiLCJkeCIsImZhZGVPdXQiLCJkeSIsIm5vZGVXaWR0aCIsImNyZWF0ZUJhY2tCdXR0b24iLCJub2RlIiwiY29uc29sZSIsImxvZyIsImJ1dHRvbiIsIm9uIiwiZXZlbnQiLCJncm91cCIsInJlbW92ZSIsInByZVNhbmtleSIsImRpYnVqYXJTYW5rZXkiLCJoZWlndGgiLCJhbmNob05vZG8iLCJzZXBhcmFjaW9uTm9kbyIsImVtcHR5Iiwic2Fua2V5Iiwibm9kZVBhZGRpbmciLCJsYXlvdXQiLCJlbnRlciIsIk1hdGgiLCJtYXgiLCJzb3J0IiwiYSIsImIiLCJkcmFnIiwiZHJhZ21vdmUiLCJlIiwibWluIiwicmVsYXlvdXQiLCJhY3R1YWxpemFyU2Fua2V5Iiwib2xkTGlua3MiLCJsaW5rc0RpZmYiLCJsaW5rc19vbGQiLCJsaW5rc19uZXciLCJtYXhQYXJlbnQiLCJub2RvIiwicGFyZW50Tm9kZSIsInBhcmVudCIsImRlbGV0ZUVtcHR5Tm9kZXMiLCJkZWwiLCJub2Rlc0RlbGV0ZSIsInN0YXR1cyIsIm5vZGVJIiwibGlua0kiLCJyZXZlcnNlIiwic3BsaWNlIiwiZGVjbGFyZUdyb3VwTGlua3MiLCJkZXNhcnJvbGxvIiwicGFyZW50U291cmNlIiwic3RhdGVTb3VyY2UiLCJwYXJlbnRUYXJnZXQiLCJzdGF0ZVRhcmdldCIsIm5vZG9FeGlzdGVudGUiLCJhZGRTb3VyY2UiLCJhZGRUYXJnZXQiLCJhZGRWYWx1ZSIsImV4dGVuZCIsImluaXQiLCJkb3dubG9hZEZpbGUiLCJmb3JtYXRvU2Fua2V5IiwiZWxlbWVudG8iLCJwcm9jZXNzRGF0YSIsImNhdGVnb3J5IiwicG9zaXRpb24iLCJpbXBvcnRhdGlvbiIsInNwbGl0IiwibWFwIiwiZXhwb3J0YXRpb24iLCJwcm9kdWN0aW9uIiwicHJvbWlzZSIsIlByb21pc2UiLCJzdWNjZXNzIiwiY3N2Iiwibm9kb3MiLCJ0aGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLFVBQVUsQ0FBQyxTQUFELEVBQVcsU0FBWCxFQUFzQixTQUF0QixFQUFnQyxTQUFoQyxDQUFkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJQyxZQUFrQkMsR0FB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QXZCLENBQVg7O0FBRUFwSyxhQUFHbUssR0FBSCxDQUFPLHNCQUFQLEVBQ0UsVUFBQzFGLEtBQUQsRUFBVztBQUNUdkQsdUJBQVdvSSxjQUFjLE9BQWQsRUFBdUI3RSxLQUF2QixDQUFYOztBQUVBeUY7QUFDRCxXQUxIO0FBT0QsU0FYSDtBQWFELE9BZGEsQ0FBZDs7QUFnQkEsYUFBT0YsT0FBUDtBQUNELEtBckREOztBQXVEQVgsbUJBQWVnQixJQUFmLENBQW9CLFlBQU07QUFDeEJqRTtBQUNELEtBRkQ7QUFHRCxHQTVERDs7QUE4REpnRDtBQUNELENBdHFCRCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgY29sb3JlcyA9IFsnI2ZmYmI0MicsJyM4MDgwODAnLCAnI2YxODU0YicsJyNmMjM4NWEnXTtcblxuLy8gIFZhcmlhYmxlcyBHbG9iYWxlc1xuLy8gbGV0IHNjYWxlQ29sb3JMaW5rICA9IGQzLnNjYWxlT3JkaW5hbCgpXG4vLyAgIC5yYW5nZSgnd2hpdGUnKVxuLy8gICAvLyAucmFuZ2UoY29sb3Jlcylcbi8vICAgLmRvbWFpbignRW5lcmfDrWFzIFByaW1hcmlhcycsICdDZW50cm9zIGRlIFRyYW5zZm9ybWFjacOzbicsICdFbmVyZ8OtYXMgU2VjdW5kYXJpYXMnLCAnQ29uc3VtbycpO1xubGV0IGZvbnRTY2FsZSAgICAgICA9IGQzLnNjYWxlTGluZWFyKClcbiAgLnJhbmdlKFs4LCAxNl0pO1xuXG4vLyAgRnVuY2lvbmVzXG4vLyBjb25zdCBmb3JtYXRvTnVtZXJvID0gKGQpID0+IHtcbi8vICAgbGV0IGZvcm1hdCA9IGQzLmZvcm1hdCgnLC4wZicpO1xuLy9cbi8vICAgcmV0dXJuIGAkeyBmb3JtYXQoZCkgfSBUd2hgO1xuLy8gfTtcblxuLyogUmVzdGEgZWwgcG9yY2VudGFqZSBpbmRpY2FkbyBhIHVuIGNvbG9yIChSUiwgR0cgbyBCQikgaGV4YWRlY2ltYWwgcGFyYSBvc2N1cmVjZXJsbyAqL1xuY29uc3Qgc3VidHJhY3RMaWdodCA9IGZ1bmN0aW9uKGNvbG9yLCBhbW91bnQpe1xuICBsZXQgY2MgPSBwYXJzZUludChjb2xvciwxNikgLSBhbW91bnQ7XG4gIGxldCBjID0gKGNjIDwgMCkgPyAwIDogKGNjKTtcbiAgYyA9IChjLnRvU3RyaW5nKDE2KS5sZW5ndGggPiAxICkgPyBjLnRvU3RyaW5nKDE2KSA6IGAwJHtjLnRvU3RyaW5nKDE2KX1gO1xuXG4gIHJldHVybiBjO1xufTtcblxuLyogT3NjdXJlY2UgdW4gY29sb3IgaGV4YWRlY2ltYWwgZGUgNiBjYXJhY3RlcmVzICNSUkdHQkIgc2VndW4gZWwgcG9yY2VudGFqZSBpbmRpY2FkbyAqL1xuY29uc3QgZGFya2VuID0gKGNvbG9yLCBhbW91bnQpID0+e1xuICBjb2xvciA9IChjb2xvci5pbmRleE9mKCcjJyk+PTApID8gY29sb3Iuc3Vic3RyaW5nKDEsY29sb3IubGVuZ3RoKSA6IGNvbG9yO1xuICBhbW91bnQgPSBwYXJzZUludCgoMjU1KmFtb3VudCkvMTAwKTtcbiAgY29sb3IgPSBgIyR7c3VidHJhY3RMaWdodChjb2xvci5zdWJzdHJpbmcoMCwyKSwgYW1vdW50KX0ke3N1YnRyYWN0TGlnaHQoY29sb3Iuc3Vic3RyaW5nKDIsNCksIGFtb3VudCl9JHtzdWJ0cmFjdExpZ2h0KGNvbG9yLnN1YnN0cmluZyg0LDYpLCBhbW91bnQpfWA7XG5cbiAgcmV0dXJuIGNvbG9yO1xufTtcblxuJCgoKSA9PiB7XG5cbiAgbGV0IGhlaWdodCAgICAgID0gJCgnI3NhbmtleScpLmhlaWdodCgpLFxuICAgICAgd2lkdGggICAgICAgPSAkKCcjc2Fua2V5Jykud2lkdGgoKSxcbiAgICAgIC8vIGNsYXZlc05vZG9zID0gW10sXG4gICAgICAvLyBkYXRhU2Fua2V5ICA9IHt9LFxuICAgICAgLy8gbW92ZUlkID0gMCxcbiAgICAgIG5vZGVzT3JpLCBsaW5rc09yaSxcbiAgICAgIG5vZGVzR2xvLCBsaW5rc0dsbyxcbiAgICAgIHNhbmtleUNoYXJ0RDMsIHBhdGgsIHN2ZztcblxuICAvLyAgRnVuY2lvbmVzXG4gICAgICAvLyBjb25zdCBnZW5lcmFyUHVlcnRhcyAgICA9ICgpID0+IHtcbiAgICAgIC8vICAgZGF0YVNhbmtleS5ub2Rlcy5maWx0ZXIoKGVsZW1lbnQpID0+IChlbGVtZW50LnBhcmVudCA9PT0gZmFsc2UpKS5mb3JFYWNoKCh2LCBrKSA9PiB7XG4gICAgICAvLyAgICAgY2xhdmVzTm9kb3MucHVzaCh7ICdpZCc6IHYuaWQsICdzdGF0ZSc6IHRydWUgfSk7XG4gICAgICAvLyAgIH0pO1xuICAgICAgLy8gfTtcbiAgICAgIGNvbnN0IGNyZWF0ZUdyYWZpY28gPSAoZGF0YSwgY29udGFpbmVyKSA9PiB7XG4gICAgICAgIC8vIFZhcmlhYmxlc1xuICAgICAgICBsZXQgbWFyZ2luID0geyB0b3A6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAsIGxlZnQ6IDAgfTtcbiAgICAgICAgbGV0IHNpemUgPSB7IHdpZHRoOiAoMzAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQpLCBoZWlnaHQ6ICg1MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tKSB9O1xuICAgICAgICBsZXQgeWVhcnMgPSBbJzIwMTInLCAnMjAxMycsICcyMDE0JywgJzIwMTUnLCAnMjAxNicsICcyMDE3J107XG4gICAgICAgIGxldCBuZXdEYXRhID0gW107XG5cbiAgICAgICAgZGF0YS5mb3JFYWNoKCh2LCBrKSA9PiB7IG5ld0RhdGEucHVzaCh7IGRhdGU6IG5ldyBEYXRlKHllYXJzW2tdKSwgdmFsdWU6IHYgfSk7IH0pO1xuXG4gICAgICAgIGxldCBzdmdHcmFmaWNvID0gY29udGFpbmVyLmh0bWwoJycpLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBzaXplLndpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHNpemUuaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyBtYXJnaW4ubGVmdCB9LCAkeyBtYXJnaW4udG9wIH0pYCk7XG5cbiAgICAgICAgLy8gbGV0IHBhcnNlVGltZSA9IGQzLnRpbWVQYXJzZSgnJWQtJWItJXknKTtcblxuICAgICAgICBsZXQgeCA9IGQzLnNjYWxlVGltZSgpXG4gICAgICAgICAgLmRvbWFpbihkMy5leHRlbnQobmV3RGF0YSwgKGQpID0+IGQuZGF0ZSkpXG4gICAgICAgICAgLnJhbmdlUm91bmQoWzAsIHNpemUud2lkdGhdKTtcbiAgICAgICAgbGV0IHkgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAgICAgLmRvbWFpbihkMy5leHRlbnQobmV3RGF0YSwgKGQpID0+IGQudmFsdWUpKVxuICAgICAgICAgIC5yYW5nZVJvdW5kKFtzaXplLmhlaWdodCwgMF0pO1xuXG5cbiAgICAgICAgbGV0IGxpbmUgPSBkMy5saW5lKCkueCgoZCkgPT4geChkLmRhdGUpKS55KChkKSA9PiB5KGQudmFsdWUpKTtcblxuICAgICAgICBzdmdHcmFmaWNvLmFwcGVuZCgnZycpXG4gICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4KSlcbiAgICAgICAgICAuc3R5bGUoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMHB4LCAkeyBzaXplLmhlaWdodCAtIDEgfXB4KWApO1xuXG4gICAgICAgIHN2Z0dyYWZpY28uYXBwZW5kKCdnJylcbiAgICAgICAgICAuY2FsbChkMy5heGlzTGVmdCh5KSk7XG4gICAgICAgIC8vIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAvLyAgIC5hdHRyKCdmaWxsJywgJyMwMDAnKVxuICAgICAgICAvLyAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAncm90YXRlKC05MCknKVxuICAgICAgICAvLyAgIC5hdHRyKCd5JywgNilcbiAgICAgICAgLy8gICAuYXR0cignZHknLCAnMC43MWVtJylcbiAgICAgICAgLy8gICAuYXR0cigndGV4dC1hbmNob3InLCAnZW5kJylcbiAgICAgICAgLy8gICAudGV4dCgnUHJpY2UgKCQpJyk7XG5cbiAgICAgICAgc3ZnR3JhZmljby5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgIC5kYXR1bShuZXdEYXRhKVxuICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ25vbmUnKVxuICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnc3RlZWxibHVlJylcbiAgICAgICAgICAuYXR0cignc3Ryb2tlLWxpbmVqb2luJywgJ3JvdW5kJylcbiAgICAgICAgICAuYXR0cignc3Ryb2tlLWxpbmVjYXAnLCAncm91bmQnKVxuICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAxLjUpXG4gICAgICAgICAgLmF0dHIoJ2QnLCBsaW5lKTtcbiAgICAgIH07XG4gICAgICBjb25zdCB1cGRhdGVQbGFjYSA9IChlbGVtZW50KSA9PiB7XG4gICAgICAgIGxldCBjb250ZW5lZG9yID0gZDMuc2VsZWN0KCcjcGxhY2EnKTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3Iuc2VsZWN0KCcucGxhY2FfdGl0dWxvJykuc3R5bGUoJ3RleHQtdHJhbnNmb3JtJywgJ3VwcGVyY2FzZScpLnRleHQoZWxlbWVudC5uYW1lKTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3Iuc2VsZWN0KCcucGxhY2FfcHJvZCcpLnRleHQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICBjb250ZW5lZG9yLnNlbGVjdCgnLnBsYWNhX2ltcCcpLnRleHQoZWxlbWVudC52YWx1ZSAqIDAuMik7XG4gICAgICAgICAgICBjb250ZW5lZG9yLnNlbGVjdCgnLnBsYWNhX2V4cCcpLnRleHQoZWxlbWVudC52YWx1ZSAqIDAuMSk7XG4gICAgICAgICAgICBjb250ZW5lZG9yLnNlbGVjdCgnLnBsYWNhX2xvc3QnKS50ZXh0KGVsZW1lbnQudmFsdWUgKiAwLjA1KTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3Iuc2VsZWN0KCcucGxhY2FfZWZpJykudGV4dCgoKGVsZW1lbnQudmFsdWUgLSAgKGVsZW1lbnQudmFsdWUgKiAwLjA1KSkgKiAxMDApIC8gZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICBjb250ZW5lZG9yLnNlbGVjdCgnLnBsYWNhX21vcmUnKS50ZXh0KGVsZW1lbnQudmFsdWUgICogMC4wMSk7XG5cbiAgICAgICAgY3JlYXRlR3JhZmljbyhlbGVtZW50LnByb2QsIGNvbnRlbmVkb3Iuc2VsZWN0KCcucGxhY2FfZ3JhZmljby5ncmFmaWNvX3Byb2QnKSk7XG4gICAgICAgIGNyZWF0ZUdyYWZpY28oZWxlbWVudC5pbXAsIGNvbnRlbmVkb3Iuc2VsZWN0KCcucGxhY2FfZ3JhZmljby5ncmFmaWNvX2ltcCcpKTtcbiAgICAgICAgY3JlYXRlR3JhZmljbyhlbGVtZW50LmV4cCwgY29udGVuZWRvci5zZWxlY3QoJy5wbGFjYV9ncmFmaWNvLmdyYWZpY29fZXhwJykpO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgZmFkZUluID0gKG9wYWNpdHkpID0+IChnLCBpKSA9PiB7XG4gICAgICAgIHVwZGF0ZVBsYWNhKGcpO1xuXG4gICAgICAgIGxldCBpZF9ub2RlcyA9IFtdLFxuICAgICAgICAgICAgbGlua3MsXG4gICAgICAgICAgICBsaW5rc0ZpbHRlcixcbiAgICAgICAgICAgIG5vZGVzLFxuICAgICAgICAgICAgbm9kZXNGaWx0ZXI7XG5cbiAgICAgICAgLy8gYWRkIGV2ZW50IG5vZGVcbiAgICAgICAgaWRfbm9kZXMucHVzaChnLmlkKTtcbiAgICAgICAgLy8gYWRkIHNvdXJjZUxpbmtzXG4gICAgICAgIGcuc291cmNlTGlua3MuZm9yRWFjaCgobGluaykgPT4geyBpZF9ub2Rlcy5wdXNoKGxpbmsudGFyZ2V0LmlkKTsgfSk7XG4gICAgICAgIC8vIGFkZCB0YXJnZXRMaW5rc1xuICAgICAgICBnLnRhcmdldExpbmtzLmZvckVhY2goKGxpbmspID0+IHsgaWRfbm9kZXMucHVzaChsaW5rLnNvdXJjZS5pZCk7IH0pO1xuXG4gICAgICAgIC8vIHNlbGVjdCBsaW5rc1xuICAgICAgICBsaW5rcyA9IGQzLnNlbGVjdEFsbCgnI3NhbmtleSAubGluaycpO1xuICAgICAgICAvLyAgbGlua3MgZm9jdXNJblxuICAgICAgICAvLyBkMy5zZWxlY3RBbGwoJyNzYW5rZXkgLmxpbmsnKVxuICAgICAgICAvLyAgIC5maWx0ZXIoKGQpID0+IChkLnNvdXJjZS5pZCA9PT0gZy5pZCB8fCBkLnRhcmdldC5pZCA9PT0gZy5pZCkpXG4gICAgICAgIC8vICAgLnRyYW5zaXRpb24oKS5zdHlsZSgnc3Ryb2tlLW9wYWNpdHknLCAuNzUpO1xuICAgICAgICAvLyBsaW5rcyBmb2N1c091dFxuICAgICAgICBsaW5rc0ZpbHRlciA9IGxpbmtzLmZpbHRlcigoZCkgPT4gKGQuc291cmNlLmlkICE9PSBnLmlkICYmIGQudGFyZ2V0LmlkICE9PSBnLmlkKSk7XG4gICAgICAgIGxpbmtzRmlsdGVyLnRyYW5zaXRpb24oKS5zdHlsZSgnc3Ryb2tlLW9wYWNpdHknLCBvcGFjaXR5KTtcblxuICAgICAgICAvLyAgc2VsZWN0IG5vZGVzXG4gICAgICAgIG5vZGVzID0gZDMuc2VsZWN0QWxsKCcjc2Fua2V5IC5ub2RlJyk7XG4gICAgICAgIC8vIG5vZGVzIGZvY3VzSW5cbiAgICAgICAgbm9kZXNGaWx0ZXIgPSBub2Rlcy5maWx0ZXIoKGQpID0+IHtcbiAgICAgICAgICBsZXQgc3RhdHVzTm9kZSA9IGZhbHNlO1xuXG4gICAgICAgICAgaWRfbm9kZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4geyBpZiAoZWxlbWVudCA9PT0gZC5pZCkgeyBzdGF0dXNOb2RlID0gdHJ1ZTsgfSB9KTtcblxuICAgICAgICAgIHJldHVybiBzdGF0dXNOb2RlO1xuICAgICAgICB9KTtcbiAgICAgICAgbm9kZXNGaWx0ZXIuc2VsZWN0KCdyZWN0JykudHJhbnNpdGlvbigpLnN0eWxlKCdmaWxsJywgKGQpID0+IGRhcmtlbignd2hpdGUnLCAyMCkpO1xuICAgICAgICAvLyBub2Rlc0ZpbHRlci5zZWxlY3QoJ3JlY3QnKS50cmFuc2l0aW9uKCkuc3R5bGUoJ2ZpbGwnLCAoZCkgPT4gZGFya2VuKGNvbG9yZXNbZC5wb3MgLSAxXSwgMjApKTtcbiAgICAgICAgbm9kZXNGaWx0ZXIuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAgICAgLmF0dHIoJ3knLCAtMTApXG4gICAgICAgICAgLy8gLnRleHQoKGQpID0+IChkLm5hbWUpKVxuICAgICAgICAgIC5hdHRyKCd4JywgKGQpID0+IChkLmR4IC8gMikpO1xuICAgICAgICAvLyBub2RlcyBmb2N1c091dFxuICAgICAgICBub2Rlc0ZpbHRlciA9IG5vZGVzLmZpbHRlcigoZCkgPT4ge1xuICAgICAgICAgIGxldCBzdGF0dXNOb2RlID0gdHJ1ZTtcblxuICAgICAgICAgIGlkX25vZGVzLmZvckVhY2goKGVsZW1lbnQpID0+IHsgaWYgKGVsZW1lbnQgPT09IGQuaWQpIHsgc3RhdHVzTm9kZSA9IGZhbHNlOyB9IH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHN0YXR1c05vZGU7XG4gICAgICAgIH0pO1xuICAgICAgICBub2Rlc0ZpbHRlci50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCBvcGFjaXR5KTtcbiAgICAgICAgfTtcbiAgICAgIGNvbnN0IGZhZGVPdXQgPSAob3BhY2l0eSkgPT4gKGcsIGkpID0+IHtcblxuICAgICAgICBsZXQgaWRfbm9kZXMgPSBbXSxcbiAgICAgICAgICAgIGxpbmtzLFxuICAgICAgICAgICAgbGlua3NGaWx0ZXIsXG4gICAgICAgICAgICBub2RlcyxcbiAgICAgICAgICAgIG5vZGVzRmlsdGVyO1xuXG4gICAgICAgIC8vIGFkZCBldmVudCBub2RlXG4gICAgICAgIGlkX25vZGVzLnB1c2goZy5pZCk7XG4gICAgICAgIC8vIGFkZCBzb3VyY2VMaW5rc1xuICAgICAgICBnLnNvdXJjZUxpbmtzLmZvckVhY2goKGxpbmspID0+IHsgaWRfbm9kZXMucHVzaChsaW5rLnRhcmdldC5pZCk7IH0pO1xuICAgICAgICAvLyBhZGQgdGFyZ2V0TGlua3NcbiAgICAgICAgZy50YXJnZXRMaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7IGlkX25vZGVzLnB1c2gobGluay5zb3VyY2UuaWQpOyB9KTtcblxuICAgICAgICAvLyBzZWxlY3QgbGlua3NcbiAgICAgICAgbGlua3MgPSBkMy5zZWxlY3RBbGwoJyNzYW5rZXkgLmxpbmsnKTtcbiAgICAgICAgLy8gIGxpbmtzIGZvY3VzSW5cbiAgICAgICAgLy8gZDMuc2VsZWN0QWxsKCcjc2Fua2V5IC5saW5rJylcbiAgICAgICAgLy8gICAuZmlsdGVyKChkKSA9PiAoZC5zb3VyY2UuaWQgPT09IGcuaWQgfHwgZC50YXJnZXQuaWQgPT09IGcuaWQpKVxuICAgICAgICAvLyAgIC50cmFuc2l0aW9uKCkuc3R5bGUoJ3N0cm9rZS1vcGFjaXR5JywgLjc1KTtcbiAgICAgICAgLy8gbGlua3MgZm9jdXNPdXRcbiAgICAgICAgbGlua3NGaWx0ZXIgPSBsaW5rcy5maWx0ZXIoKGQpID0+IChkLnNvdXJjZS5pZCAhPT0gZy5pZCAmJiBkLnRhcmdldC5pZCAhPT0gZy5pZCkpO1xuICAgICAgICBsaW5rc0ZpbHRlci50cmFuc2l0aW9uKCkuc3R5bGUoJ3N0cm9rZS1vcGFjaXR5JywgMC43NSk7XG5cbiAgICAgICAgLy8gIHNlbGVjdCBub2Rlc1xuICAgICAgICBub2RlcyA9IGQzLnNlbGVjdEFsbCgnI3NhbmtleSAubm9kZScpO1xuICAgICAgICAvLyBub2RlcyBmb2N1c0luXG4gICAgICAgIG5vZGVzRmlsdGVyID0gbm9kZXMuZmlsdGVyKChkKSA9PiB7XG4gICAgICAgICAgbGV0IHN0YXR1c05vZGUgPSBmYWxzZTtcblxuICAgICAgICAgIGlkX25vZGVzLmZvckVhY2goKGVsZW1lbnQpID0+IHsgaWYgKGVsZW1lbnQgPT09IGQuaWQpIHsgc3RhdHVzTm9kZSA9IHRydWU7IH0gfSk7XG5cbiAgICAgICAgICByZXR1cm4gc3RhdHVzTm9kZTtcbiAgICAgICAgfSk7XG4gICAgICAgIG5vZGVzRmlsdGVyLnNlbGVjdCgncmVjdCcpXG4gICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIChkKSA9PiAnd2hpdGUnKTtcbiAgICAgICAgICAvLyAuc3R5bGUoJ2ZpbGwnLCAoZCkgPT4gY29sb3Jlc1tkLnBvcyAtIDFdKTtcbiAgICAgICAgbm9kZXNGaWx0ZXIuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2VuZCcpXG4gICAgICAgICAgLmF0dHIoJ3knLCAoZCkgPT4gKGQuZHkgLyAyKSkuYXR0cigneCcsIC0xMClcbiAgICAgICAgICAvLyAudGV4dCgoZCkgPT4gKGQubmFtZS5sZW5ndGggPiA4KSA/IChkLm5hbWUuc3Vic3RyaW5nKDAsIDUpICsgJy4uLicpIDogKGQubmFtZSkpXG4gICAgICAgICAgLmZpbHRlcigoZCkgPT4gKGQueCA8IHdpZHRoIC8gMikpXG4gICAgICAgICAgICAuYXR0cigneCcsIDEwICsgc2Fua2V5Q2hhcnREMy5ub2RlV2lkdGgoKSlcbiAgICAgICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpO1xuICAgICAgICAvLyBub2RlcyBmb2N1c091dFxuICAgICAgICBub2Rlc0ZpbHRlciA9IG5vZGVzLmZpbHRlcigoZCkgPT4ge1xuICAgICAgICAgIGxldCBzdGF0dXNOb2RlID0gdHJ1ZTtcblxuICAgICAgICAgIGlkX25vZGVzLmZvckVhY2goKGVsZW1lbnQpID0+IHsgaWYgKGVsZW1lbnQgPT09IGQuaWQpIHsgc3RhdHVzTm9kZSA9IGZhbHNlOyB9IH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHN0YXR1c05vZGU7XG4gICAgICAgIH0pO1xuICAgICAgICBub2Rlc0ZpbHRlci50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKTtcbiAgICAgIH07XG4gICAgICAvLyBjb25zdCBjb2xhcHNhckV4cGFuZGlyTm9kbyA9IChub2RvKSA9PiB7XG4gICAgICAvL1xuICAgICAgLy8gICBub2Rlc09yaVtub2RvLmlkXS5ncm91cCA9IChub2Rlc09yaVtub2RvLmlkXS5ncm91cCkgPyAoZmFsc2UpIDogKHRydWUpO1xuICAgICAgLy9cbiAgICAgIC8vICAgcmV0dXJuIG5vZGVzT3JpO1xuICAgICAgLy9cbiAgICAgIC8vXG4gICAgICAvLyAgIC8vIGxldCBvbGRMaW5rcyA9IGRhdGFTYW5rZXkubGlua3M7XG4gICAgICAvL1xuICAgICAgLy8gICAvLyBpZiAobm9kby5wYXJlbnQgPT09IGZhbHNlKSB7XG4gICAgICAvLyAgIC8vICAgY29uc29sZS5sb2coJ1NlIGV4cGFuZGUgbm9kbycpO1xuICAgICAgLy8gICAvLyAgIGNsYXZlc05vZG9zLmZvckVhY2goKGVsZW1lbnQpID0+IHsgaWYgKGVsZW1lbnQuaWQgPT09IG5vZG8uaWQgKyBtb3ZlSWQpIHsgZWxlbWVudC5zdGF0ZSA9IGZhbHNlOyB9IH0pO1xuICAgICAgLy8gICAvL1xuICAgICAgLy8gICAvLyAgIGRhdGFTYW5rZXkubm9kZXMgPSBub2Rvc09yaWdpbmFsZXM7XG4gICAgICAvLyAgIC8vICAgZGF0YVNhbmtleS5saW5rcyA9IGxpbmtzT3JpZ2luYWxlcztcbiAgICAgIC8vICAgLy9cbiAgICAgIC8vICAgLy8gICBkYXRhU2Fua2V5LmxpbmtzID0gZGVjbGFyZUdyb3VwTGlua3MoZGF0YVNhbmtleS5saW5rcywgdHJ1ZSk7XG4gICAgICAvLyAgIC8vXG4gICAgICAvLyAgIC8vICAgZGF0YVNhbmtleSA9IGJ1c2Nhck5vZGVzKGRhdGFTYW5rZXkubm9kZXMsIGRhdGFTYW5rZXkubGlua3MpO1xuICAgICAgLy8gICAvLyAgIG1vdmVJZCA9IDA7XG4gICAgICAvLyAgIC8vICAgJCgnI3NhbmtleScpLmVtcHR5KCk7XG4gICAgICAvLyAgIC8vICAgZGlidWphclNhbmtleSh3aWR0aCwgaGVpZ2h0LCBkYXRhU2Fua2V5KTtcbiAgICAgIC8vICAgLy8gICAvLyBhY3R1YWxpemFyU2Fua2V5KCQoJyNjb250ZW50Jykud2lkdGgoKSwgJCgnI2NvbnRlbnQnKS5oZWlnaHQoKSwgZGF0YVNhbmtleSwgb2xkTGlua3MpO1xuICAgICAgLy8gICAvLyB9IGVsc2Uge1xuICAgICAgLy8gICAvLyAgIGNvbnNvbGUubG9nKCdTZSBjb2xhcHNhIG5vZG8nKTtcbiAgICAgIC8vICAgLy8gICAvLyBsZXQgcGFyZW50ID0gZGF0YVNhbmtleS5ub2Rlcy5maWx0ZXIoKGVsZW1lbnQpID0+IChlbGVtZW50Lm5hbWUgPT09IG5vZG8ucGFyZW50KSlbMF07XG4gICAgICAvLyAgIC8vICAgLy8gY2xhdmVzTm9kb3MuZmlsdGVyKChlbGVtZW50KSA9PiAoZWxlbWVudC5pZCA9PT0gcGFyZW50LmlkKSlbMF0uc3RhdGUgPSB0cnVlO1xuICAgICAgLy8gICAvLyAgIC8vXG4gICAgICAvLyAgIC8vICAgLy8gZGF0YVNhbmtleSA9IGJ1c2Nhck5vZGVzKG5vZG9zT3JpZ2luYWxlcywgZGF0YVNhbmtleS5saW5rcyA9IGRlY2xhcmVHcm91cExpbmtzKGxpbmtzT3JpZ2luYWxlcykpO1xuICAgICAgLy8gICAvLyAgIC8vXG4gICAgICAvLyAgIC8vICAgLy8gJCgnI3NhbmtleScpLmVtcHR5KCk7XG4gICAgICAvLyAgIC8vICAgLy8gZGlidWphclNhbmtleSh3aWR0aCwgaGVpZ2h0LCBkYXRhU2Fua2V5KTtcbiAgICAgIC8vICAgLy8gICAvLyBhY3R1YWxpemFyU2Fua2V5KCQoJyNjb250ZW50Jykud2lkdGgoKSwgJCgnI2NvbnRlbnQnKS5oZWlnaHQoKSwgZGF0YVNhbmtleSwgb2xkTGlua3MpO1xuICAgICAgLy8gICAvLyB9XG4gICAgICAvLyB9O1xuICAgICAgY29uc3QgY3JlYXRlQmFja0J1dHRvbiA9IChub2RlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICBsZXQgYnV0dG9uID0gZDMuc2VsZWN0KCcjcGxhY2EgLmFncnVwJylcbiAgICAgICAgICAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgKCkgPT4gKGBub2RlXyR7IG5vZGUuaWQgfWApKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JhY2tCdXR0b24nKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBpZiAobm9kZXNPcmlbbm9kZS5pZF0uZ3JvdXApIHtcbiAgICAgICAgICAgICAgICBub2Rlc09yaVtub2RlLmlkXS5ncm91cCA9IGZhbHNlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGVzT3JpW25vZGUuaWRdLmdyb3VwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICQoYCNub2RlXyR7IG5vZGUuaWQgfWApLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgIHByZVNhbmtleSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgYnV0dG9uLmFwcGVuZCgnc3BhbicpLmF0dHIoJ2NsYXNzJywgJ2JhY2tCdXR0b25fdGV4dCcpLnRleHQobm9kZS5uYW1lKTtcbiAgICAgICAgYnV0dG9uLmFwcGVuZCgnc3BhbicpXG4gICAgICAgICAgLmFwcGVuZCgnaScpXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2ZhIGZhLXRpbWVzJylcbiAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpXG4gICAgICAgICAgLnN0eWxlKCdtYXJnaW4tbGVmdCcsICcxMHB4Jyk7XG4gICAgICB9O1xuICAgICAgY29uc3QgZGlidWphclNhbmtleSA9ICh3aWR0aCwgaGVpZ3RoLCBkYXRhKSA9PiB7XG5cbiAgICAgICAgLy8gVmFyaWFibGVzXG4gICAgICAgIGxldCBtYXJnaW4gPSB7IHRvcDogNTAsIHJpZ2h0OiA1MCwgYm90dG9tOiA1MCwgbGVmdDogNTAgfTtcbiAgICAgICAgbGV0IHNpemUgPSB7IHdpZHRoOiAod2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCksIGhlaWdodDogKGhlaWd0aCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tKSB9O1xuICAgICAgICBsZXQgYW5jaG9Ob2RvID0gMjA7XG4gICAgICAgIGxldCBzZXBhcmFjaW9uTm9kbyA9IDIwO1xuXG4gICAgICAgICQoJyNzYW5rZXknKS5lbXB0eSgpO1xuXG4gICAgICAgIC8vIENyZWFjacOzbiBTVkdcbiAgICAgICAgc3ZnID0gZDMuc2VsZWN0KCcjc2Fua2V5JylcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgc2l6ZS53aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHNpemUuaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyBtYXJnaW4ubGVmdCB9LCAkeyBtYXJnaW4udG9wIH0pYCk7XG5cbiAgICAgICAgLy8gQ3JlYWNpw7NuIFNhbmtleVxuICAgICAgICBzYW5rZXlDaGFydEQzID0gZDMuc2Fua2V5KClcbiAgICAgICAgICAubm9kZVdpZHRoKGFuY2hvTm9kbylcbiAgICAgICAgICAubm9kZVBhZGRpbmcoc2VwYXJhY2lvbk5vZG8pXG4gICAgICAgICAgLnNpemUoW3NpemUud2lkdGgsIHNpemUuaGVpZ2h0XSlcbiAgICAgICAgICAubm9kZXMoZGF0YS5ub2RlcylcbiAgICAgICAgICAubGlua3MoZGF0YS5saW5rcylcbiAgICAgICAgICAubGF5b3V0KCk7XG5cbiAgICAgICAgLy8gY29uc3QgZ2VuZXJhckdyYWRpZW50ZXMgPSAoY29sb3JlcykgPT4ge1xuICAgICAgICAvLyAgIGxldCBrZXlzID0ge307XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgY29sb3Jlcy5mb3JFYWNoKCh2LCBrKSA9PiB7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICBjb2xvcmVzLmZvckVhY2goKHYyLCBrMikgPT4ge1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICBrZXlzW2AkeyBrICsgMSB9JHsgazIgKyAxIH1gXSA9IFt2LCB2Ml07XG4gICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy8gICB9KTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICByZXR1cm4ga2V5cztcbiAgICAgICAgLy8gfTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gbGV0IGtleXMgPSBnZW5lcmFyR3JhZGllbnRlcyhjb2xvcmVzKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gY29uc29sZS5sb2coa2V5cyk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIGZvciAobGV0IGtleSBpbiBrZXlzKSB7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgZXZhbChgbGV0IGtleV8keyBrZXkgfSA9IHN2Zy5hcHBlbmQoJ2RlZnMnKVxuICAgICAgICAvLyAgICAgLmFwcGVuZCgnbGluZWFyR3JhZGllbnQnKVxuICAgICAgICAvLyAgICAgICAuYXR0cignaWQnLCAna2V5XyR7IGtleSB9JylcbiAgICAgICAgLy8gICAgICAgLmF0dHIoJ3gxJywgJzAlJylcbiAgICAgICAgLy8gICAgICAgLmF0dHIoJ3gyJywgJzEwMCUnKVxuICAgICAgICAvLyAgICAgICAuYXR0cignc3ByZWFkTWV0aG9kJywgJ3BhZCcpO1xuICAgICAgICAvLyAgICAga2V5XyR7IGtleSB9LmFwcGVuZCgnc3RvcCcpXG4gICAgICAgIC8vICAgICAgICAgLmF0dHIoJ29mZnNldCcsICcwJScpXG4gICAgICAgIC8vICAgICAgICAgLmF0dHIoJ3N0b3AtY29sb3InLCAnJHsga2V5c1trZXldWzBdIH0nKVxuICAgICAgICAvLyAgICAgICAgIC5hdHRyKCdzdG9wLW9wYWNpdHknLCAxKTtcbiAgICAgICAgLy8gICAgIGtleV8keyBrZXkgfS5hcHBlbmQoJ3N0b3AnKVxuICAgICAgICAvLyAgICAgICAgIC5hdHRyKCdvZmZzZXQnLCAnMTAwJScpXG4gICAgICAgIC8vICAgICAgICAgLmF0dHIoJ3N0b3AtY29sb3InLCAnJHsga2V5c1trZXldWzFdIH0nKVxuICAgICAgICAvLyAgICAgICAgIC5hdHRyKCdzdG9wLW9wYWNpdHknLCAxKTtgKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIENyZWFjacOzbiBkZSBMaW5rc1xuICAgICAgICBwYXRoID0gc2Fua2V5Q2hhcnREMy5saW5rKCk7XG5cbiAgICAgICAgZm9udFNjYWxlLmRvbWFpbihkMy5leHRlbnQoZGF0YS5ub2RlcywgKGQpID0+IGQudmFsdWUpKTtcblxuICAgICAgICAvLyAgU2UgY3JlYW4gbGlua3NcbiAgICAgICAgbGV0IGxpbmsgPSBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAuYXR0cignaWQnLCAnbGlua3MnKVxuICAgICAgICAgIC5zZWxlY3RBbGwoJy5saW5rJylcbiAgICAgICAgICAuZGF0YShkYXRhLmxpbmtzKVxuICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluaycpXG4gICAgICAgICAgICAuYXR0cignZCcsIHBhdGgpXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIChkKSA9PiBNYXRoLm1heCgxLCBkLmR5KSlcbiAgICAgICAgICAgIC8vIC5zdHlsZSgnc3Ryb2tlJywgJ3NpbHZlcicpXG4gICAgICAgICAgICAvLyB0cmFiYWphbmRvXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIChkKSA9PiAnc2lsdmVyJylcbiAgICAgICAgICAgIC8vIC5zdHlsZSgnc3Ryb2tlJywgKGQpID0+IHtcbiAgICAgICAgICAgIC8vICAgbGV0IGtleSA9IFtkLnNvdXJjZS5wb3MsIGQudGFyZ2V0LnBvc107XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICByZXR1cm4gYHVybCgja2V5XyR7IGtleVswXSB9JHsga2V5WzFdIH0pYDtcbiAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZS1vcGFjaXR5JywgMC43NSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKGQpID0+IHsgZDMuc2VsZWN0KGQzLmV2ZW50LnRhcmdldCkuc3R5bGUoJ3N0cm9rZS1vcGFjaXR5JywgMSk7IH0pXG4gICAgICAgICAgICAub24oJ21vdXNlb3V0JywgKGQpID0+IHsgZDMuc2VsZWN0KGQzLmV2ZW50LnRhcmdldCkuc3R5bGUoJ3N0cm9rZS1vcGFjaXR5JywgMC43NSk7IH0pXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gKGIuZHkgLSBhLmR5KSk7XG5cbiAgICAgICAgbGluay5maWx0ZXIoKGVsZW1lbnQpID0+IChlbGVtZW50LnRhcmdldC5uYW1lID09PSAnRVhQT1JUQUNJT05FUycgfHwgZWxlbWVudC50YXJnZXQubmFtZSA9PT0gJ0NPTlNVTU8gUFJPUElPJyB8fCBlbGVtZW50LnRhcmdldC5uYW1lID09PSAnVFJBTlNQT1JURScgfHwgZWxlbWVudC50YXJnZXQubmFtZSA9PT0gJ1BFUkRJREEnKSlcbiAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICcjQkEzRjFEJyk7XG4gICAgICAgIGxpbmsuZmlsdGVyKChlbGVtZW50KSA9PiAoZWxlbWVudC5zb3VyY2UubmFtZSA9PT0gJ0lNUE9SVEFDSU9ORVMnKSlcbiAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdncmVlbicpO1xuXG4gICAgICAgIC8vIFNlIGNyZWFuIG5vZG9zXG4gICAgICAgIGxldCBub2RlID0gc3ZnLmFwcGVuZCgnZycpXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ25vZGVzJylcbiAgICAgICAgICAuc2VsZWN0QWxsKCcubm9kZScpXG4gICAgICAgICAgLmRhdGEoZGF0YS5ub2Rlcy5maWx0ZXIoKGVsZW1lbnQpID0+IChlbGVtZW50LnNvdXJjZUxpbmtzLmxlbmd0aCAhPT0gMCB8fCBlbGVtZW50LnRhcmdldExpbmtzLmxlbmd0aCAhPT0gMCkpKVxuICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cignaWQnLCAoZCkgPT4gZC5pZClcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlJylcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCkgPT4gYHRyYW5zbGF0ZSgkeyBkLnggfSwgJHsgZC55IH0pYClcbiAgICAgICAgICAgIC5jYWxsKGQzLmRyYWcoKS5vbignZHJhZycsIGRyYWdtb3ZlKSk7XG4gICAgICAgIC8vIFNlIGNyZWFuIHJlY3Rhbmd1bG9zIG5vZG9zXG4gICAgICAgIG5vZGUuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHNhbmtleUNoYXJ0RDMubm9kZVdpZHRoKCkpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgKGQpID0+IE1hdGgubWF4KDEwLCBkLmR5KSlcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgKGQpID0+ICdzaWx2ZXInKVxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgKGQpID0+ICd3aGl0ZScpXG4gICAgICAgICAgICAvLyAuc3R5bGUoJ2ZpbGwnLCAoZCkgPT4gY29sb3Jlc1tkLnBvcyAtIDFdKVxuICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmYWRlSW4oMC4wMjUpKVxuICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZhZGVPdXQoKSlcbiAgICAgICAgICAgIC5vbignZGJsY2xpY2snLCAoZSkgPT4ge1xuXG4gICAgICAgICAgICAgIGlmIChub2Rlc09yaVtlLmlkXS5ncm91cCkge1xuICAgICAgICAgICAgICAgIG5vZGVzT3JpW2UuaWRdLmdyb3VwID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZXNPcmlbZS5pZF0uZ3JvdXAgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNyZWF0ZUJhY2tCdXR0b24oZSk7XG4gICAgICAgICAgICAgIHByZVNhbmtleSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2UgY3JlYW4gdGV4dG9zIG5vZG9zXG4gICAgICAgIG5vZGUuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgIC5hdHRyKCd4JywgLTEwKVxuICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2VuZCcpXG4gICAgICAgICAgICAuYXR0cigneScsIChkKSA9PiAoZC5keSAvIDIpKVxuICAgICAgICAgICAgLmF0dHIoJ2R5JywgJy4zNWVtJylcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICdibGFjaycpXG4gICAgICAgICAgICAvLyAuc3R5bGUoJ2ZpbGwnLCAoZCkgPT4gY29sb3Jlc1tkLnBvcyAtIDFdKVxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTRweCcpXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgJ25vcm1hbCcpXG4gICAgICAgICAgICAvLyAuc3R5bGUoJ2ZvbnQtc2l6ZScsIChkKSA9PiBgJHsgTWF0aC5mbG9vcihmb250U2NhbGUoZC52YWx1ZSkpIH1weGApXG4gICAgICAgICAgICAudGV4dCgoZCkgPT4gKGQubmFtZSkpXG4gICAgICAgICAgICAvLyAudGV4dCgoZCkgPT4gKGQubmFtZS5sZW5ndGggPiA4KSA/IChkLm5hbWUuc3Vic3RyaW5nKDAsIDUpICsgJy4uLicpIDogKGQubmFtZSkpXG4gICAgICAgICAgICAuZmlsdGVyKChkKSA9PiAoZC54IDwgd2lkdGggLyAyKSlcbiAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAxMCArIHNhbmtleUNoYXJ0RDMubm9kZVdpZHRoKCkpXG4gICAgICAgICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpO1xuICAgICAgICAvLyBTZSBhZ3JlZ2EgdGV4dG8gcmVmZXJlbmNpYSBob3ZlciBsaW5rXG4gICAgICAgIGxpbmsuYXBwZW5kKCd0aXRsZScpLnRleHQoKGQpID0+IGAkeyBkLnNvdXJjZS5uYW1lIH0gKCR7IGQuc291cmNlLmlkIH0pIOKGkiAkeyBkLnRhcmdldC5uYW1lIH0gKCR7IGQudGFyZ2V0LmlkIH0pIOKGkiAkeyBkLnZhbHVlIH1gKTtcbiAgICAgICAgLy8gU2UgYWdyZWdhIHRleHRvIHJlZmVyZW5jaWEgaG92ZXIgbm9kZVxuICAgICAgICAvLyBub2RlLmFwcGVuZCgndGl0bGUnKS50ZXh0KChkKSA9PiBgJHsgZC5uYW1lIH0gKCR7IGQuaWQgfSlgKTtcblxuICAgICAgICAvLyB0aGUgZnVuY3Rpb24gZm9yIG1vdmluZyB0aGUgbm9kZXNcbiAgICAgICAgZnVuY3Rpb24gZHJhZ21vdmUoZCkge1xuICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7IGQueCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHNpemUud2lkdGggLSBkLmR4LCBkMy5ldmVudC54KSkgfSwgJHsgZC55ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc2l6ZS5oZWlnaHQgLSBkLmR5LCBkMy5ldmVudC55KSkgfSlgKTtcbiAgICAgICAgICBzYW5rZXlDaGFydEQzLnJlbGF5b3V0KCk7XG4gICAgICAgICAgbGluay5hdHRyKCdkJywgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFjdHVhbGl6YXJTYW5rZXkgPSAod2lkdGgsIGhlaWd0aCwgZGF0YSwgb2xkTGlua3MpID0+IHtcbiAgICAgICAgY29uc3QgbGlua3NEaWZmID0gKGxpbmtzX29sZCwgbGlua3NfbmV3KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2cobGlua3Nfb2xkKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhsaW5rc19uZXcpO1xuICAgICAgICAgIGxldCBsaW5rcyA9IFtdLFxuICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgIHRhcmdldDtcblxuICAgICAgICAgIGxpbmtzX25ldy5mb3JFYWNoKCh2LCBrKSA9PiB7XG4gICAgICAgICAgICBzb3VyY2UgID0gdi5zb3VyY2U7XG4gICAgICAgICAgICB0YXJnZXQgID0gdi50YXJnZXQ7XG5cbiAgICAgICAgICAgIGxpbmtzX29sZC5mb3JFYWNoKCh2LCBrKSA9PiB7IGlmICgoc291cmNlICE9PSB2LnNvdXJjZS5pZCkgfHwgKHRhcmdldCAhPT0gdi50YXJnZXQuaWQpKSB7IGxpbmtzLnB1c2godik7IH0gfSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gbGlua3M7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gbGV0IG5ld05vZGVzID0gbm9kZXNEaWZmKGRhdGEsIHNhbmtleURhdGEpO1xuICAgICAgICAvLyBsZXQgbmV3TGlua3MgPSBsaW5rc0RpZmYob2xkTGlua3MsIGRhdGEubGlua3MpO1xuXG4gICAgICAgIC8vIFBhcmFtZXRyb3NcbiAgICAgICAgbGV0IG1hcmdpbiA9IHtcbiAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHNpemUgPSB7XG4gICAgICAgICAgd2lkdGg6IHdpZHRoIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG4gICAgICAgICAgaGVpZ2h0OiBoZWlndGggLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENyZWFjacOzbiBTYW5rZXlcbiAgICAgICAgc2Fua2V5Q2hhcnREMyA9IGQzLnNhbmtleSgpXG4gICAgICAgICAgLm5vZGVXaWR0aCgyMCkgLy8gQW5jaG8gbm9kb1xuICAgICAgICAgIC5zaXplKFtzaXplLndpZHRoLCBzaXplLmhlaWdodF0pXG4gICAgICAgICAgLm5vZGVzKGRhdGEubm9kZXMpXG4gICAgICAgICAgLmxpbmtzKGRhdGEubGlua3MpXG4gICAgICAgICAgLmxheW91dCgzMik7XG5cbiAgICAgICAgc2Fua2V5Q2hhcnREMy5yZWxheW91dCgpO1xuXG4gICAgICAgIC8vIENyZWFjacOzbiBkZSBMaW5rc1xuICAgICAgICBwYXRoID0gc2Fua2V5Q2hhcnREMy5saW5rKCk7XG4gICAgICAgICQoJyNsaW5rcycpLmVtcHR5KCk7XG5cbiAgICAgICAgbGV0IGxpbmtzID0gZDMuc2VsZWN0KCcjbGlua3MnKVxuICAgICAgICAgIC5zZWxlY3RBbGwoJy5saW5rJylcbiAgICAgICAgICAuZGF0YShkYXRhLmxpbmtzKVxuICAgICAgICAgIC5lbnRlcigpO1xuXG4gICAgICAgIGxpbmtzLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluaycpXG4gICAgICAgICAgICAuYXR0cignZCcsIChkKSA9PiBwYXRoKGQpKVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCAoZCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gZC5keTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdncmF5JylcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKGQpID0+IHtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZDMuZXZlbnQpO1xuICAgICAgICAgICAgICBkMy5zZWxlY3QoZDMuZXZlbnQudGFyZ2V0KS5zdHlsZSgnc3Ryb2tlJywgJ3JlZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoZCkgPT4ge1xuICAgICAgICAgICAgICBkMy5zZWxlY3QoZDMuZXZlbnQudGFyZ2V0KS5zdHlsZSgnc3Ryb2tlJywgJ2dyYXknKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGQzLnNlbGVjdEFsbCgnLmxpbmsnKVxuICAgICAgICAvLyAgIC5kYXRhKGRhdGEubGlua3MpXG4gICAgICAgIC8vICAgLmF0dHIoJ2QnLCAoZCkgPT4gcGF0aChkKSk7XG4gICAgICAgIGQzLnNlbGVjdEFsbCgnLm5vZGUnKVxuICAgICAgICAgIC5kYXRhKGRhdGEubm9kZXMpXG4gICAgICAgICAgLy8gLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCkgPT4gYHRyYW5zbGF0ZSgkeyBkLnggfSwgJHsgZC55IH0pYCk7XG4gICAgICAgIGQzLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAgICAgLmRhdGEoZGF0YS5ub2RlcylcbiAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAwKVxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHNhbmtleUNoYXJ0RDMubm9kZVdpZHRoKCkpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIChkKSA9PiBkLmR5KVxuICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcblxuICAgICAgICAvLyBDcmVhdGUgRGlmZXJlbmNlXG4gICAgICAgIC8vIG5ld0xpbmtzLmZvckVhY2goKHYsIGspID0+IHtcbiAgICAgICAgLy8gICBsZXQgbGluayA9IGQzLnNlbGVjdCgnI2xpbmtzJylcbiAgICAgICAgLy8gICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAvLyAgICAgICAuYXR0cignY2xhc3MnLCAnbGluaycpXG4gICAgICAgIC8vICAgICAgIC5hdHRyKCdkJywgKCkgPT4gcGF0aCh2KSlcbiAgICAgICAgLy8gICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCAoKSA9PiBNYXRoLm1heCgxLCB2LmR5KSlcbiAgICAgICAgLy8gICAgICAgLnN0eWxlKCdzdHJva2UnLCAoKSA9PiBzY2FsZUNvbG9yKHYuc291cmNlLm5hbWUucmVwbGFjZSgnICcsICcnKSkpXG4gICAgICAgIC8vICAgICAgIC5zb3J0KChhLCBiKSA9PiAoYi5keSAtIGEuZHkpKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICBsaW5rLmFwcGVuZCgndGl0bGUnKS50ZXh0KCgpID0+IGAkeyB2LnNvdXJjZS5uYW1lIH0g4oaSICR7IHYudGFyZ2V0Lm5hbWUgfSBcXG4gJHsgZm9ybWF0b051bWVybyh2LnZhbHVlKSB9YCk7XG4gICAgICAgIC8vIH0pO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IG1heFBhcmVudCA9IChub2RvKSA9PiB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG5vZG8pO1xuICAgICAgICBsZXQgcGFyZW50Tm9kZSA9IG5vZGVzR2xvLmZpbHRlcigoZWxlbWVudCkgPT4gKGVsZW1lbnQuaWQgPT09IG5vZG8ucGFyZW50KSlbMF07XG5cbiAgICAgICAgaWYgKG5vZG8ucGFyZW50ICE9PSBmYWxzZSkge1xuICAgICAgICAgIGlmICh0eXBlb2YocGFyZW50Tm9kZSkgIT09ICd1bmRlZmluZWQnICYmIHBhcmVudE5vZGUuZ3JvdXAgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXhQYXJlbnQobm9kZXNHbG8uZmlsdGVyKChlbGVtZW50KSA9PiAoZWxlbWVudC5pZCA9PT0gbm9kby5wYXJlbnQpKVswXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBub2RvO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbm9kbztcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGRlbGV0ZUVtcHR5Tm9kZXMgPSAoKSA9PiB7XG4gICAgICAgIGxldCBkZWwgPSAwLFxuICAgICAgICAgICAgbm9kZXNEZWxldGUgPSBbXSxcbiAgICAgICAgICAgIHN0YXR1cztcblxuICAgICAgICAvLyBtb3ZlSWQgPSAwO1xuXG4gICAgICAgIG5vZGVzR2xvLmZvckVhY2goKG5vZGUsIG5vZGVJKSA9PiB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ25vZG86ICcgKyBub2RlSSArICcgKCBpZDogJyArIG5vZGUuaWQgKyAnKScpO1xuICAgICAgICAgIHN0YXR1cyA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gQ29uc3VsdG8gc2kgZWwgbm9kbyBzZSB1dGlsaXphIGVuIGFsZ3VuIGxpbmtcbiAgICAgICAgICBsaW5rc0dsby5mb3JFYWNoKChsaW5rLCBsaW5rSSkgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGUuaWQgPT09IGxpbmsuc291cmNlKSB7XG4gICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgIGxpbmsuc291cmNlID0gbGluay5zb3VyY2UgLSBkZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5pZCA9PT0gbGluay50YXJnZXQpIHtcbiAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgbGluay50YXJnZXQgPSBsaW5rLnRhcmdldCAtIGRlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIC8vIE1vZGlmaWNhciBlbCBJRCByZXN0YW5kbyBsYSBjYW50aWRhZCBkZSBlbGVtZW50b3MgYm9ycmFkb3NcbiAgICAgICAgICAvLyBub2RlLmlkID0gbm9kZS5pZCAtIGRlbDtcblxuICAgICAgICAgIGlmICghc3RhdHVzKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQm9ycmFyJyk7XG4gICAgICAgICAgICBub2Rlc0RlbGV0ZS5wdXNoKG5vZGVJKTtcbiAgICAgICAgICAgIGRlbCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBlbHNlIHtcbiAgICAgICAgICAvLyAgIC8vIGNvbnNvbGUubG9nKCdub2RvOiAnICsgbm9kZUkgKyAnICggaWQ6ICcgKyBub2RlLmlkICsgJyk8LScpO1xuICAgICAgICAgIC8vIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbm9kZXNEZWxldGUucmV2ZXJzZSgpLmZvckVhY2goKG5vZGUpID0+IHsgbm9kZXNHbG8uc3BsaWNlKG5vZGUsIDEpOyB9KTtcblxuICAgICAgICAvLyBtb3ZlSWQgPSBkZWw7XG4gICAgICAgIC8vIG5vZGVzLmZvckVhY2goKG5vZGUsIG5vZGVJKSA9PiB7XG4gICAgICAgIC8vICAgY29uc29sZS5sb2coJ25vZG86ICcgKyBub2RlSSArICcgKCBpZDogJyArIG5vZGUuaWQgKyAnKScpO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyhsaW5rcyk7XG4gICAgICAgIHJldHVybiBub2Rlc0dsbztcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlY2xhcmVHcm91cExpbmtzID0gKGRlc2Fycm9sbG8gPSBmYWxzZSkgPT4ge1xuICAgICAgICBsZXQgbGlua3MgPSBbXSxcbiAgICAgICAgICAgIHNvdXJjZSwgcGFyZW50U291cmNlLCBzdGF0ZVNvdXJjZSxcbiAgICAgICAgICAgIHRhcmdldCwgcGFyZW50VGFyZ2V0LCBzdGF0ZVRhcmdldCxcbiAgICAgICAgICAgIG5vZG9FeGlzdGVudGUsXG4gICAgICAgICAgICBhZGRTb3VyY2UsXG4gICAgICAgICAgICBhZGRUYXJnZXQsXG4gICAgICAgICAgICBhZGRWYWx1ZTtcblxuICAgICAgICBsaW5rc0dsby5mb3JFYWNoKCh2LCBrKSA9PiB7XG4gICAgICAgICAgLy9TZSBvYnRpZW5lIHNvdXJjZSB5IHRhcmdldCBkZWwgZWxlbWVudG9cbiAgICAgICAgICBzb3VyY2UgPSBub2Rlc0dsby5maWx0ZXIoKGVsZW1lbnQpID0+IChlbGVtZW50LmlkID09PSBwYXJzZUludCh2LnNvdXJjZSkpKVswXTtcbiAgICAgICAgICB0YXJnZXQgPSBub2Rlc0dsby5maWx0ZXIoKGVsZW1lbnQpID0+IChlbGVtZW50LmlkID09PSBwYXJzZUludCh2LnRhcmdldCkpKVswXTtcbiAgICAgICAgICAvL1NlIGd1YXJkYSBzb3VyY2UtcGFkcmUgeSB0YXJnZXQtcGFkcmVcbiAgICAgICAgICBwYXJlbnRTb3VyY2UgPSBtYXhQYXJlbnQoc291cmNlKTtcbiAgICAgICAgICBwYXJlbnRUYXJnZXQgPSBtYXhQYXJlbnQodGFyZ2V0KTtcbiAgICAgICAgICAvL1NlIGd1YXJkYSBzb3VyY2Utc3RhdGUgeSB0YXJnZXQtc3RhdGVcbiAgICAgICAgICBzdGF0ZVNvdXJjZSA9IHBhcmVudFNvdXJjZS5ncm91cDtcbiAgICAgICAgICBzdGF0ZVRhcmdldCA9IHBhcmVudFRhcmdldC5ncm91cDtcbiAgICAgICAgICAvL1NlIGd1YXJkYSBzb3VyY2UgeSBsaW5rIGEgY3JlYXJcbiAgICAgICAgICBhZGRTb3VyY2UgPSAoc3RhdGVTb3VyY2UpID8gKHBhcmVudFNvdXJjZSkgOiAoc291cmNlKTtcbiAgICAgICAgICBhZGRUYXJnZXQgPSAoc3RhdGVUYXJnZXQpID8gKHBhcmVudFRhcmdldCkgOiAodGFyZ2V0KTtcbiAgICAgICAgICBhZGRWYWx1ZSAgPSBwYXJzZUludCh2LnZhbHVlKTtcbiAgICAgICAgICAvL1NlIGNvbnN1bHRhIHNpIGVsIG5vZG8gZXhpc3RlXG4gICAgICAgICAgbm9kb0V4aXN0ZW50ZSA9IGxpbmtzLmZpbHRlcigoZWxlbWVudCkgPT4gKGVsZW1lbnQuc291cmNlID09PSBhZGRTb3VyY2UuaWQgJiYgZWxlbWVudC50YXJnZXQgPT09IGFkZFRhcmdldC5pZCkpO1xuXG4gICAgICAgICAgaWYgIChub2RvRXhpc3RlbnRlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy9TZSBzdW1hIHZhbG9yIGEgZHVwbGljYWRvXG4gICAgICAgICAgICBub2RvRXhpc3RlbnRlWzBdLnZhbHVlICs9IGFkZFZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL1NlIGNyZW8gbnVldm8gbGlua1xuICAgICAgICAgICAgbGlua3MucHVzaCh7XG4gICAgICAgICAgICAgICdzb3VyY2UnOiBhZGRTb3VyY2UuaWQsXG4gICAgICAgICAgICAgICd0YXJnZXQnOiBhZGRUYXJnZXQuaWQsXG4gICAgICAgICAgICAgICd2YWx1ZSc6ICBhZGRWYWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpbmtzO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcHJlU2Fua2V5ID0gKCkgPT4ge1xuICAgICAgICBsaW5rc0dsbyA9ICQuZXh0ZW5kKHRydWUsIFtdLCBsaW5rc09yaSk7XG4gICAgICAgIG5vZGVzR2xvID0gJC5leHRlbmQodHJ1ZSwgW10sIG5vZGVzT3JpKTtcbiAgICAgICAgbGlua3NHbG8gPSBkZWNsYXJlR3JvdXBMaW5rcygpO1xuICAgICAgICBub2Rlc0dsbyA9IGRlbGV0ZUVtcHR5Tm9kZXMoKTtcblxuICAgICAgICBkaWJ1amFyU2Fua2V5KHdpZHRoLCBoZWlnaHQsIHsgJ25vZGVzJzogbm9kZXNHbG8sICdsaW5rcyc6IGxpbmtzR2xvIH0pO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgaW5pdCA9ICgpID0+IHtcblxuICAgICAgICBjb25zdCBkb3dubG9hZEZpbGUgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1NlIHNvbGljaXRhbiBhcmNoaXZvcycpOyAvLyBCb3JyYXJcblxuICAgICAgICAgIGNvbnN0IGZvcm1hdG9TYW5rZXkgICAgID0gKGVsZW1lbnRvLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBsZXQgcHJvY2Vzc0RhdGEgPSBbXTtcblxuICAgICAgICAgICAgc3dpdGNoIChlbGVtZW50bykge1xuICAgICAgICAgICAgICBjYXNlICdub2Rvcyc6XG4gICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKCh2LCBrKSA9PiB7XG4gICAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgJ2lkJyAgICAgIDogcGFyc2VJbnQodi5pZCksXG4gICAgICAgICAgICAgICAgICAgICduYW1lJyAgICA6IHYubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmVudCcgIDogKHYucGFyZW50ID09PSAnbnVsbCcpPyhmYWxzZSk6KHBhcnNlSW50KHYucGFyZW50KSksXG4gICAgICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IHYuY2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgICAgICdwb3MnICAgICA6IHBhcnNlSW50KHYucG9zaXRpb24pLFxuICAgICAgICAgICAgICAgICAgICAnZ3JvdXAnICAgOiAodi5ncm91cCA9PT0gJ3RydWUnKT8odHJ1ZSk6KGZhbHNlKSxcbiAgICAgICAgICAgICAgICAgICAgJ2ltcCcgICAgIDogdi5pbXBvcnRhdGlvbi5zcGxpdCgnOycpLm1hcCgoZWxlbWVudCkgPT4gKHBhcnNlSW50KGVsZW1lbnQpKSksXG4gICAgICAgICAgICAgICAgICAgICdleHAnICAgICA6IHYuZXhwb3J0YXRpb24uc3BsaXQoJzsnKS5tYXAoKGVsZW1lbnQpID0+IChwYXJzZUludChlbGVtZW50KSkpLFxuICAgICAgICAgICAgICAgICAgICAncHJvZCcgICAgOiB2LnByb2R1Y3Rpb24uc3BsaXQoJzsnKS5tYXAoKGVsZW1lbnQpID0+IChwYXJzZUludChlbGVtZW50KSkpXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnbGlua3MnOlxuICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaCgodiwgaykgPT4ge1xuICAgICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICdzb3VyY2UnOiBwYXJzZUludCh2LnNvdXJjZSksXG4gICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiBwYXJzZUludCh2LnRhcmdldCksXG4gICAgICAgICAgICAgICAgICAgICd2YWx1ZScgOiBwYXJzZUludCh2LnZhbHVlKSxcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc0RhdGE7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKHN1Y2Nlc3MpID0+IHtcbiAgICAgICAgICAgIGQzLmNzdigncHVibGljL3NyYy9ub2Rlcy5jc3YnLFxuICAgICAgICAgICAgICAobm9kb3MpID0+IHtcbiAgICAgICAgICAgICAgICBub2Rlc09yaSA9IGZvcm1hdG9TYW5rZXkoJ25vZG9zJywgbm9kb3MpO1xuXG4gICAgICAgICAgICAgICAgZDMuY3N2KCdwdWJsaWMvc3JjL2xpbmtzLmNzdicsXG4gICAgICAgICAgICAgICAgICAobGlua3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGlua3NPcmkgPSBmb3JtYXRvU2Fua2V5KCdsaW5rcycsIGxpbmtzKTtcblxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIGRvd25sb2FkRmlsZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHByZVNhbmtleSgpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgaW5pdCgpO1xufSk7XG4iXX0=
